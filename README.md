# 問合せフォーム管理システム

Node.js/Next.jsで構築された問合せフォーム管理システムです。3つのアプリケーションで構成されています。

## システム構成

### 1. form-editor（フォームエディタ）
問合せフォームの作成・編集・管理を行うアプリケーション

**機能:**
- **フォーム管理**
  - フォーム一覧表示・検索・フィルタリング
  - フォームの作成・編集・削除・複製
  - 項目の並び替え（ドラッグ&ドロップ）
  - フォームのプレビュー機能

- **入力項目の設定**
  - 項目種別：text, textarea, select, radio, checkbox, file
  - バリデーション設定（必須、メール、電話番号、数値、文字数制限）
  - 選択肢の設定、「その他」オプション、複数選択対応

- **スタイル設定**
  - CSS編集画面（名前空間ベース）
  - リアルタイムプレビュー
  - プリセットテーマの選択

- **送信設定**
  - 完了ページURLの設定
  - 送信控えメールの設定
  - 署名の選択
  - ファイルアップロード設定
  - 複数回送信の許可設定

- **署名管理**
  - メール署名の作成・編集・削除
  - デフォルト署名の設定

- **メール管理**
  - 受信・送信メールの一覧・詳細表示
  - メールの返信・転送・削除
  - ステータス管理（未読・既読）
  - 優先度・カテゴリの設定

- **JavaScriptコード生成**
  - 任意のサイトに埋め込み可能な形式
  - バリデーション機能付き

### 2. mailbox（メールボックス）
作成されたフォームからの問合せを管理するアプリケーション

**機能:**
- 問合せ一覧・詳細表示
- ステータス管理（未読、既読、対応中、完了）
- 返信機能
- フィルタリング・検索

### 3. sample-viewer（サンプルビューア）
作成されたフォームの動作確認を行うアプリケーション

**機能:**
- フォームの表示・動作確認
- JavaScriptコードの生成・コピー
- 送信テスト

## 技術仕様

- **フレームワーク**: Next.js 15.5.3 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS 4
- **UIコンポーネント**: Radix UI + shadcn/ui
- **状態管理**: Zustand
- **フォーム管理**: React Hook Form + Zod
- **アニメーション**: Framer Motion
- **ドラッグ&ドロップ**: @dnd-kit
- **アイコン**: Lucide React
- **データ管理**: JSONファイル + ローカルストレージ

## セットアップ

### 前提条件
- Node.js 18以上
- npm または yarn

### インストール

1. リポジトリをクローン
```bash
git clone <repository-url>
cd inquiry-relation
```

2. 各アプリケーションの依存関係をインストール

```bash
# form-editor
cd form-editor
npm install
cd ..

# mailbox
cd mailbox
npm install
cd ..

# sample-viewer
cd sample-viewer
npm install
cd ..
```

## 起動方法

### 開発モード

各アプリケーションを別々のターミナルで起動してください：

```bash
# form-editor (ポート 3300)
cd form-editor
npm run dev

# mailbox (ポート 3301)
cd mailbox
npm run dev

# sample-viewer (ポート 3302)
cd sample-viewer
npm run dev
```

### アクセスURL

- **フォームエディタ**: http://localhost:3300
- **メールボックス**: http://localhost:3301
- **サンプルビューア**: http://localhost:3302

## 使用方法

### 1. フォーム作成（form-editor）

1. http://localhost:3300 にアクセス
2. 「新しいフォーム」ボタンをクリック
3. フォーム名と説明を入力
4. 「項目設定」タブでフォーム項目を追加
   - ドラッグ&ドロップで項目の並び替え
   - バリデーション設定
   - 選択肢の設定
5. 「スタイル」タブでCSSを編集
   - 名前空間ベースのCSS
   - リアルタイムプレビュー
6. 「送信設定」タブで完了ページURLと署名を設定
   - ファイルアップロード設定
   - 複数回送信の許可設定
7. 「プレビュー」タブで確認
8. 「保存」ボタンで保存

### 1-2. 署名管理（form-editor）

1. サイドバーの「署名管理」をクリック
2. 「新しい署名」ボタンで署名を作成
3. 署名名と内容を入力
4. デフォルト署名の設定
5. 署名の編集・削除

### 1-3. メール管理（form-editor）

1. サイドバーの「受信」または「送信」をクリック
2. メール一覧でステータスやカテゴリでフィルタリング
3. メールをクリックして詳細表示
4. 返信・転送・削除の操作
5. 優先度・カテゴリの設定

### 2. 問合せ管理（mailbox）

1. http://localhost:3301 にアクセス
2. 問合せ一覧でステータスやフォームでフィルタリング
3. 問合せをクリックして詳細表示
4. 返信フォームで返信を送信
5. ステータスを更新

### 3. フォームテスト（sample-viewer）

1. http://localhost:3302 にアクセス
2. 作成したフォームを選択
3. 「フォーム表示」タブでフォームをテスト
4. 「JavaScriptコード」タブでコードをコピー
5. 任意のWebページにコードを貼り付けて使用

## データ管理

### データファイル
- `data/forms.json` - フォーム定義
- `data/inquiries.json` - 問合せデータ
- `data/signatures.json` - 署名データ
- `data/settings.json` - システム設定

### ローカルストレージ
各アプリケーションはローカルストレージを使用してデータを永続化します。

## カスタマイズ

### スタイル
各フォームのスタイルはCSSでカスタマイズ可能です。プリセットテーマも用意されています。

### バリデーション
フォーム項目には以下のバリデーションが設定可能です：
- 必須入力
- メールアドレス形式
- 電話番号形式
- 数値形式
- 文字数制限（最小・最大）
- カスタムパターン

### レスポンシブデザイン
- モバイル・タブレット・デスクトップ対応
- ハンバーガーメニューによるモバイルナビゲーション
- 現在位置の明確な表示
- タップ領域の最適化

## トラブルシューティング

### よくある問題

1. **ポートが使用中**
   - 別のポート番号を使用してください
   - `npm run dev -- -p <port-number>`

2. **データが表示されない**
   - ブラウザのローカルストレージをクリアしてください
   - 各アプリケーションで初期化処理が実行されます

3. **フォームが送信されない**
   - サンプルビューアでテストしてください
   - 実際のAPIエンドポイントは実装されていません（モック版）

## 今後の拡張予定

- データベース連携
- 認証・認可機能
- リアルタイム通信
- API連携
- 多言語対応
- テンプレート機能の拡張

## ライセンス

MIT License
