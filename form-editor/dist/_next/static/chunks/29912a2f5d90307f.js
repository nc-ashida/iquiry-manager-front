(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";let t;e.s(["default",()=>rJ],52683);var n,r,l,a,i,s,o,d,c,u,m=e.i(43476),h=e.i(71645);let p={FORMS:"inquiry_forms",SIGNATURES:"inquiry_signatures",SETTINGS:"inquiry_settings"},f={forms:()=>{let e=localStorage.getItem(p.FORMS);return e?JSON.parse(e):[]},signatures:()=>{let e=localStorage.getItem(p.SIGNATURES);return e?JSON.parse(e):[]},settings:()=>{let e=localStorage.getItem(p.SETTINGS);return e?JSON.parse(e):g()}},x={forms:e=>{localStorage.setItem(p.FORMS,JSON.stringify(e))},signatures:e=>{localStorage.setItem(p.SIGNATURES,JSON.stringify(e))},settings:e=>{localStorage.setItem(p.SETTINGS,JSON.stringify(e))}},g=()=>({defaultSignature:"",autoReplyEnabled:!0,maxFormsPerUser:10}),v=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);var b=e.i(19455),y=e.i(93479),w=e.i(55436),j=e.i(7233),N=e.i(78583),C=e.i(15288),S=e.i(87486),k=e.i(68499),D=e.i(88511),E=e.i(27612),R=e.i(75254);let M=(0,R.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),I=(0,R.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function T(e){let{form:t,onEdit:n,onDelete:r,onDuplicate:l}=e,a=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=(()=>{let e={};return t.fields.forEach(t=>{e[t.type]=(e[t.type]||0)+1}),e})();return(0,m.jsxs)(C.Card,{className:"hover:shadow-md transition-shadow duration-200 h-full flex flex-col",children:[(0,m.jsx)(C.CardHeader,{className:"pb-3 flex-shrink-0",children:(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)(C.CardTitle,{className:"text-lg font-semibold mb-1 truncate",children:t.name}),t.description&&(0,m.jsx)(C.CardDescription,{className:"text-sm text-gray-600 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.description})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>n(t),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 h-8 w-8 p-0 transition-colors duration-200",children:(0,m.jsx)(D.Edit,{className:"h-4 w-4"})}),(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>l(t),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 h-8 w-8 p-0 transition-colors duration-200",children:(0,m.jsx)(M,{className:"h-4 w-4"})}),(0,m.jsxs)(k.AlertDialog,{children:[(0,m.jsx)(k.AlertDialogTrigger,{asChild:!0,children:(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0 transition-colors duration-200",children:(0,m.jsx)(E.Trash2,{className:"h-4 w-4"})})}),(0,m.jsxs)(k.AlertDialogContent,{className:"bg-white border shadow-xl",children:[(0,m.jsxs)(k.AlertDialogHeader,{children:[(0,m.jsx)(k.AlertDialogTitle,{children:"フォームを削除しますか？"}),(0,m.jsxs)(k.AlertDialogDescription,{children:["フォーム「",t.name,"」を削除します。この操作は取り消すことができません。",t.fields.length>0&&(0,m.jsxs)("span",{className:"block mt-2 text-orange-600",children:["⚠️ このフォームには",t.fields.length,"個のフィールドが含まれています。"]})]})]}),(0,m.jsxs)(k.AlertDialogFooter,{children:[(0,m.jsx)(k.AlertDialogCancel,{className:"hover:bg-gray-100 transition-colors duration-200",children:"キャンセル"}),(0,m.jsx)(k.AlertDialogAction,{onClick:()=>r(t.id),className:"bg-red-600 hover:bg-red-700 text-white",children:"削除する"})]})]})]})]})]})}),(0,m.jsxs)(C.CardContent,{className:"pt-0 flex-1 flex flex-col",children:[(0,m.jsxs)("div",{className:"space-y-3 flex-1",children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm text-gray-600",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(N.FileText,{className:"h-4 w-4 flex-shrink-0"}),(0,m.jsxs)("span",{children:[t.fields.length,"個のフィールド"]})]}),Object.keys(i).length>0&&(0,m.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[Object.entries(i).slice(0,3).map(e=>{let[t,n]=e;return(0,m.jsxs)(S.Badge,{variant:"secondary",className:"text-xs",children:[t,": ",n]},t)}),Object.keys(i).length>3&&(0,m.jsxs)(S.Badge,{variant:"secondary",className:"text-xs",children:["+",Object.keys(i).length-3]})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,m.jsx)(I,{className:"h-4 w-4 flex-shrink-0"}),(0,m.jsxs)("span",{className:"truncate",children:["作成: ",a(t.createdAt)]})]}),t.updatedAt!==t.createdAt&&(0,m.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,m.jsx)(I,{className:"h-4 w-4 flex-shrink-0"}),(0,m.jsxs)("span",{className:"truncate",children:["更新: ",a(t.updatedAt)]})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2 pt-3 border-t mt-auto",children:[(0,m.jsxs)(b.Button,{variant:"outline",size:"sm",onClick:()=>n(t),className:"flex-1 hover:bg-gray-50 hover:border-gray-300 transition-colors duration-200",children:[(0,m.jsx)(D.Edit,{className:"h-4 w-4 mr-2"}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"編集"})]}),(0,m.jsxs)(b.Button,{variant:"outline",size:"sm",onClick:()=>l(t),className:"flex-1 hover:bg-gray-50 hover:border-gray-300 transition-colors duration-200",children:[(0,m.jsx)(M,{className:"h-4 w-4 mr-2"}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"複製"})]})]})]})]})}var L=e.i(75157);let P={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-6 w-6",xl:"h-8 w-8"},O={primary:"text-primary",secondary:"text-secondary",muted:"text-muted-foreground",white:"text-white"};function F(e){let{size:t="md",variant:n="spin",color:r="primary",className:l,label:a="読み込み中..."}=e,i=(0,L.cn)(P[t],O[r],l);switch(n){case"dots":return(0,m.jsxs)("div",{className:"flex space-x-1",role:"status","aria-label":a,children:[(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-bounce",i),style:{animationDelay:"0ms"}}),(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-bounce",i),style:{animationDelay:"150ms"}}),(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-bounce",i),style:{animationDelay:"300ms"}})]});case"pulse":return(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-pulse bg-current",i),role:"status","aria-label":a});case"bounce":return(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-bounce bg-current",i),role:"status","aria-label":a});case"wave":return(0,m.jsxs)("div",{className:"flex space-x-1",role:"status","aria-label":a,children:[(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-pulse bg-current",i),style:{animationDelay:"0ms"}}),(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-pulse bg-current",i),style:{animationDelay:"200ms"}}),(0,m.jsx)("div",{className:(0,L.cn)("rounded-full animate-pulse bg-current",i),style:{animationDelay:"400ms"}})]});default:return(0,m.jsx)("div",{className:(0,L.cn)("animate-spin rounded-full border-2 border-current border-t-transparent",i),role:"status","aria-label":a})}}function z(e){let{loading:t,children:n,fallback:r,className:l=""}=e;return t?(0,m.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(l),children:r||(0,m.jsx)(F,{})}):(0,m.jsx)(m.Fragment,{children:n})}let A=(0,R.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var B=e.i(37727);function U(e){let{message:t,onDismiss:n,className:r="",variant:l="destructive"}=e;return(0,m.jsxs)("div",{className:"".concat("flex items-center p-4 rounded-md border"," ").concat({default:"bg-yellow-50 border-yellow-200 text-yellow-800",destructive:"bg-red-50 border-red-200 text-red-800"}[l]," ").concat(r),role:"alert",children:[(0,m.jsx)(A,{className:"h-5 w-5 mr-3 flex-shrink-0"}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("p",{className:"text-sm font-medium",children:"エラーが発生しました"}),(0,m.jsx)("p",{className:"text-sm mt-1",children:t})]}),n&&(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:n,className:"ml-3 flex-shrink-0 hover:bg-gray-100 transition-colors duration-200","aria-label":"エラーを閉じる",children:(0,m.jsx)(B.X,{className:"h-4 w-4"})})]})}let q=(0,h.forwardRef)((e,t)=>{let{forms:n,onEdit:r,onDelete:l,onDuplicate:a,onCreate:i,loading:s=!1,error:o}=e,{searchQuery:d,setSearchQuery:c,filteredForms:u,handleCreateForm:p,handleEditForm:f,handleDeleteForm:x,handleDuplicateForm:g}=function(e,t,n,r,l){let[a,i]=(0,h.useState)(""),s=(0,h.useMemo)(()=>{if(!a.trim())return e;let t=a.toLowerCase();return e.filter(e=>{var n;return e.name.toLowerCase().includes(t)||(null==(n=e.description)?void 0:n.toLowerCase().includes(t))||e.fields.some(e=>e.label.toLowerCase().includes(t))})},[e,a]),o=(0,h.useCallback)(()=>{t()},[t]),d=(0,h.useCallback)(e=>{n(e)},[n]);return{searchQuery:a,setSearchQuery:i,filteredForms:s,handleCreateForm:o,handleEditForm:d,handleDeleteForm:(0,h.useCallback)(e=>{confirm("このフォームを削除しますか？この操作は元に戻せません。")&&r(e)},[r]),handleDuplicateForm:(0,h.useCallback)(e=>{l(e)},[l])}}(n,i,r,l,a);return(0,m.jsxs)("div",{ref:t,className:"h-full flex flex-col",children:[(0,m.jsx)("div",{className:"p-4 border-b",children:(0,m.jsxs)("div",{className:"relative max-w-md",children:[(0,m.jsx)(w.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,m.jsx)(y.Input,{type:"text",placeholder:"フォーム名、説明、フィールドで検索...",value:d,onChange:e=>c(e.target.value),className:"pl-10"})]})}),o&&(0,m.jsx)("div",{className:"p-4",children:(0,m.jsx)(U,{message:o})}),(0,m.jsx)("div",{className:"flex-1 overflow-auto p-4",children:(0,m.jsx)(z,{loading:s,children:u.length>0?(0,m.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:u.map(e=>(0,m.jsx)(T,{form:e,onEdit:f,onDelete:x,onDuplicate:g},e.id))}):(0,m.jsxs)("div",{className:"text-center py-12",children:[(0,m.jsx)(N.FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:d?"検索結果が見つかりません":"フォームがありません"}),(0,m.jsx)("p",{className:"text-gray-500 mb-4",children:d?"検索条件を変更してお試しください":"最初のフォームを作成して開始してください"}),!d&&(0,m.jsxs)(b.Button,{onClick:p,className:"bg-black text-white hover:bg-gray-800",children:[(0,m.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),"最初のフォームを作成"]})]})})})]})});function H(e){let{forms:t,onCreateForm:n,onEditForm:r,onDeleteForm:l,onDuplicateForm:a,loading:i=!1,error:s=null}=e;return(0,m.jsx)(q,{forms:t,onCreate:n,onEdit:r,onDelete:l,onDuplicate:a,loading:i,error:s})}q.displayName="FormList";let _=(0,R.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),V=(0,R.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),K=(0,R.default)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),W=(0,R.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),X=(0,R.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Y=(0,R.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),J=(0,R.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var G=e.i(10204),$=e.i(81140),Z=e.i(20783),Q=e.i(30030),ee=e.i(69340);function et(e){let t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var en=e.i(35804),er=e.i(48425),el="Switch",[ea,ei]=(0,Q.createContextScope)(el),[es,eo]=ea(el),ed=h.forwardRef((e,t)=>{let{__scopeSwitch:n,name:r,checked:l,defaultChecked:a,required:i,disabled:s,value:o="on",onCheckedChange:d,form:c,...u}=e,[p,f]=h.useState(null),x=(0,Z.useComposedRefs)(t,e=>f(e)),g=h.useRef(!1),v=!p||c||!!p.closest("form"),[b,y]=(0,ee.useControllableState)({prop:l,defaultProp:null!=a&&a,onChange:d,caller:el});return(0,m.jsxs)(es,{scope:n,checked:b,disabled:s,children:[(0,m.jsx)(er.Primitive.button,{type:"button",role:"switch","aria-checked":b,"aria-required":i,"data-state":eh(b),"data-disabled":s?"":void 0,disabled:s,value:o,...u,ref:x,onClick:(0,$.composeEventHandlers)(e.onClick,e=>{y(e=>!e),v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),v&&(0,m.jsx)(em,{control:p,bubbles:!g.current,name:r,value:o,checked:b,required:i,disabled:s,form:c,style:{transform:"translateX(-100%)"}})]})});ed.displayName=el;var ec="SwitchThumb",eu=h.forwardRef((e,t)=>{let{__scopeSwitch:n,...r}=e,l=eo(ec,n);return(0,m.jsx)(er.Primitive.span,{"data-state":eh(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:t})});eu.displayName=ec;var em=h.forwardRef((e,t)=>{let{__scopeSwitch:n,control:r,checked:l,bubbles:a=!0,...i}=e,s=h.useRef(null),o=(0,Z.useComposedRefs)(s,t),d=et(l),c=(0,en.useSize)(r);return h.useEffect(()=>{let e=s.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==l&&t){let n=new Event("click",{bubbles:a});t.call(e,l),e.dispatchEvent(n)}},[d,l,a]),(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function eh(e){return e?"checked":"unchecked"}function ep(e){let{className:t,...n}=e,[r,l]=h.useState(!1);return h.useEffect(()=>{void 0!==n.checked&&l(n.checked)},[n.checked]),(0,m.jsx)(ed,{"data-slot":"switch",className:(0,L.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50",t),style:{backgroundColor:r?"#000000":"#d1d5db"},onCheckedChange:e=>{var t;l(e),null==(t=n.onCheckedChange)||t.call(n,e)},...n,children:(0,m.jsx)(eu,{"data-slot":"switch-thumb",className:(0,L.cn)("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-all duration-200 ease-in-out","dark:bg-gray-100"),style:{transform:r?"translateX(20px)":"translateX(0px)",boxShadow:r?"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)":"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}})})}em.displayName="SwitchBubbleInput";var ef=e.i(74080);function ex(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}var eg=e.i(75830),ev=e.i(86318),eb=e.i(26330),ey=e.i(3536),ew=e.i(65491),ej=e.i(10772),eN=e.i(53660),eC=e.i(74606),eS=e.i(91918),ek=e.i(30207),eD=e.i(34620),eE=e.i(59411),eR=e.i(86312),eM=e.i(85369),eI=[" ","Enter","ArrowUp","ArrowDown"],eT=[" ","Enter"],eL="Select",[eP,eO,eF]=(0,eg.createCollection)(eL),[ez,eA]=(0,Q.createContextScope)(eL,[eF,eN.createPopperScope]),eB=(0,eN.createPopperScope)(),[eU,eq]=ez(eL),[eH,e_]=ez(eL),eV=e=>{let{__scopeSelect:t,children:n,open:r,defaultOpen:l,onOpenChange:a,value:i,defaultValue:s,onValueChange:o,dir:d,name:c,autoComplete:u,disabled:p,required:f,form:x}=e,g=eB(t),[v,b]=h.useState(null),[y,w]=h.useState(null),[j,N]=h.useState(!1),C=(0,ev.useDirection)(d),[S,k]=(0,ee.useControllableState)({prop:r,defaultProp:null!=l&&l,onChange:a,caller:eL}),[D,E]=(0,ee.useControllableState)({prop:i,defaultProp:s,onChange:o,caller:eL}),R=h.useRef(null),M=!v||x||!!v.closest("form"),[I,T]=h.useState(new Set),L=Array.from(I).map(e=>e.props.value).join(";");return(0,m.jsx)(eN.Root,{...g,children:(0,m.jsxs)(eU,{required:f,scope:t,trigger:v,onTriggerChange:b,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:(0,ej.useId)(),value:D,onValueChange:E,open:S,onOpenChange:k,dir:C,triggerPointerDownPosRef:R,disabled:p,children:[(0,m.jsx)(eP.Provider,{scope:t,children:(0,m.jsx)(eH,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:h.useCallback(e=>{T(t=>{let n=new Set(t);return n.delete(e),n})},[]),children:n})}),M?(0,m.jsxs)(tg,{"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:u,value:D,onChange:e=>E(e.target.value),disabled:p,form:x,children:[void 0===D?(0,m.jsx)("option",{value:""}):null,Array.from(I)]},L):null]})})};eV.displayName=eL;var eK="SelectTrigger",eW=h.forwardRef((e,t)=>{let{__scopeSelect:n,disabled:r=!1,...l}=e,a=eB(n),i=eq(eK,n),s=i.disabled||r,o=(0,Z.useComposedRefs)(t,i.onTriggerChange),d=eO(n),c=h.useRef("touch"),[u,p,f]=tb(e=>{let t=d().filter(e=>!e.disabled),n=t.find(e=>e.value===i.value),r=ty(t,e,n);void 0!==r&&i.onValueChange(r.value)}),x=e=>{s||(i.onOpenChange(!0),f()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,m.jsx)(eN.Anchor,{asChild:!0,...a,children:(0,m.jsx)(er.Primitive.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":tv(i.value)?"":void 0,...l,ref:o,onClick:(0,$.composeEventHandlers)(l.onClick,e=>{e.currentTarget.focus(),"mouse"!==c.current&&x(e)}),onPointerDown:(0,$.composeEventHandlers)(l.onPointerDown,e=>{c.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(x(e),e.preventDefault())}),onKeyDown:(0,$.composeEventHandlers)(l.onKeyDown,e=>{let t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),(!t||" "!==e.key)&&eI.includes(e.key)&&(x(),e.preventDefault())})})})});eW.displayName=eK;var eX="SelectValue",eY=h.forwardRef((e,t)=>{let{__scopeSelect:n,className:r,style:l,children:a,placeholder:i="",...s}=e,o=eq(eX,n),{onValueNodeHasChildrenChange:d}=o,c=void 0!==a,u=(0,Z.useComposedRefs)(t,o.onValueNodeChange);return(0,eD.useLayoutEffect)(()=>{d(c)},[d,c]),(0,m.jsx)(er.Primitive.span,{...s,ref:u,style:{pointerEvents:"none"},children:tv(o.value)?(0,m.jsx)(m.Fragment,{children:i}):a})});eY.displayName=eX;var eJ=h.forwardRef((e,t)=>{let{__scopeSelect:n,children:r,...l}=e;return(0,m.jsx)(er.Primitive.span,{"aria-hidden":!0,...l,ref:t,children:r||"▼"})});eJ.displayName="SelectIcon";var eG=e=>(0,m.jsx)(eC.Portal,{asChild:!0,...e});eG.displayName="SelectPortal";var e$="SelectContent",eZ=h.forwardRef((e,t)=>{let n=eq(e$,e.__scopeSelect),[r,l]=h.useState();return((0,eD.useLayoutEffect)(()=>{l(new DocumentFragment)},[]),n.open)?(0,m.jsx)(e2,{...e,ref:t}):r?ef.createPortal((0,m.jsx)(eQ,{scope:e.__scopeSelect,children:(0,m.jsx)(eP.Slot,{scope:e.__scopeSelect,children:(0,m.jsx)("div",{children:e.children})})}),r):null});eZ.displayName=e$;var[eQ,e0]=ez(e$),e1=(0,eS.createSlot)("SelectContent.RemoveScroll"),e2=h.forwardRef((e,t)=>{let{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:o,align:d,alignOffset:c,arrowPadding:u,collisionBoundary:p,collisionPadding:f,sticky:x,hideWhenDetached:g,avoidCollisions:v,...b}=e,y=eq(e$,n),[w,j]=h.useState(null),[N,C]=h.useState(null),S=(0,Z.useComposedRefs)(t,e=>j(e)),[k,D]=h.useState(null),[E,R]=h.useState(null),M=eO(n),[I,T]=h.useState(!1),L=h.useRef(!1);h.useEffect(()=>{if(w)return(0,eR.hideOthers)(w)},[w]),(0,ey.useFocusGuards)();let P=h.useCallback(e=>{let[t,...n]=M().map(e=>e.ref.current),[r]=n.slice(-1),l=document.activeElement;for(let n of e)if(n===l||(null==n||n.scrollIntoView({block:"nearest"}),n===t&&N&&(N.scrollTop=0),n===r&&N&&(N.scrollTop=N.scrollHeight),null==n||n.focus(),document.activeElement!==l))return},[M,N]),O=h.useCallback(()=>P([k,w]),[P,k,w]);h.useEffect(()=>{I&&O()},[I,O]);let{onOpenChange:F,triggerPointerDownPosRef:z}=y;h.useEffect(()=>{if(w){let e={x:0,y:0},t=t=>{var n,r,l,a;e={x:Math.abs(Math.round(t.pageX)-(null!=(l=null==(n=z.current)?void 0:n.x)?l:0)),y:Math.abs(Math.round(t.pageY)-(null!=(a=null==(r=z.current)?void 0:r.y)?a:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():w.contains(n.target)||F(!1),document.removeEventListener("pointermove",t),z.current=null};return null!==z.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[w,F,z]),h.useEffect(()=>{let e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);let[A,B]=tb(e=>{let t=M().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=ty(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),U=h.useCallback((e,t,n)=>{let r=!L.current&&!n;(void 0!==y.value&&y.value===t||r)&&(D(e),r&&(L.current=!0))},[y.value]),q=h.useCallback(()=>null==w?void 0:w.focus(),[w]),H=h.useCallback((e,t,n)=>{let r=!L.current&&!n;(void 0!==y.value&&y.value===t||r)&&R(e)},[y.value]),_="popper"===r?e5:e4,V=_===e5?{side:s,sideOffset:o,align:d,alignOffset:c,arrowPadding:u,collisionBoundary:p,collisionPadding:f,sticky:x,hideWhenDetached:g,avoidCollisions:v}:{};return(0,m.jsx)(eQ,{scope:n,content:w,viewport:N,onViewportChange:C,itemRefCallback:U,selectedItem:k,onItemLeave:q,itemTextRefCallback:H,focusSelectedItem:O,selectedItemText:E,position:r,isPositioned:I,searchRef:A,children:(0,m.jsx)(eM.RemoveScroll,{as:e1,allowPinchZoom:!0,children:(0,m.jsx)(ew.FocusScope,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,$.composeEventHandlers)(l,e=>{var t;null==(t=y.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:(0,m.jsx)(eb.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,m.jsx)(_,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault(),...b,...V,onPlaced:()=>T(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:(0,$.composeEventHandlers)(b.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=M().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>P(t)),e.preventDefault()}})})})})})})});e2.displayName="SelectContentImpl";var e4=h.forwardRef((e,t)=>{let{__scopeSelect:n,onPlaced:r,...l}=e,a=eq(e$,n),i=e0(e$,n),[s,o]=h.useState(null),[d,c]=h.useState(null),u=(0,Z.useComposedRefs)(t,e=>c(e)),p=eO(n),f=h.useRef(!1),x=h.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:b,focusSelectedItem:y}=i,w=h.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&d&&g&&v&&b){let e=a.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),l=b.getBoundingClientRect();if("rtl"!==a.dir){let r=l.left-t.left,a=n.left-r,i=e.left-a,o=e.width+i,d=Math.max(o,t.width),c=ex(a,[10,Math.max(10,window.innerWidth-10-d)]);s.style.minWidth=o+"px",s.style.left=c+"px"}else{let r=t.right-l.right,a=window.innerWidth-n.right-r,i=window.innerWidth-e.right-a,o=e.width+i,d=Math.max(o,t.width),c=ex(a,[10,Math.max(10,window.innerWidth-10-d)]);s.style.minWidth=o+"px",s.style.right=c+"px"}let i=p(),o=window.innerHeight-20,c=g.scrollHeight,u=window.getComputedStyle(d),m=parseInt(u.borderTopWidth,10),h=parseInt(u.paddingTop,10),x=parseInt(u.borderBottomWidth,10),y=m+h+c+parseInt(u.paddingBottom,10)+x,w=Math.min(5*v.offsetHeight,y),j=window.getComputedStyle(g),N=parseInt(j.paddingTop,10),C=parseInt(j.paddingBottom,10),S=e.top+e.height/2-10,k=v.offsetHeight/2,D=m+h+(v.offsetTop+k);if(D<=S){let e=i.length>0&&v===i[i.length-1].ref.current;s.style.bottom="0px";let t=Math.max(o-S,k+(e?C:0)+(d.clientHeight-g.offsetTop-g.offsetHeight)+x);s.style.height=D+t+"px"}else{let e=i.length>0&&v===i[0].ref.current;s.style.top="0px";let t=Math.max(S,m+g.offsetTop+(e?N:0)+k);s.style.height=t+(y-D)+"px",g.scrollTop=D-S+g.offsetTop}s.style.margin="".concat(10,"px 0"),s.style.minHeight=w+"px",s.style.maxHeight=o+"px",null==r||r(),requestAnimationFrame(()=>f.current=!0)}},[p,a.trigger,a.valueNode,s,d,g,v,b,a.dir,r]);(0,eD.useLayoutEffect)(()=>w(),[w]);let[j,N]=h.useState();(0,eD.useLayoutEffect)(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);let C=h.useCallback(e=>{e&&!0===x.current&&(w(),null==y||y(),x.current=!1)},[w,y]);return(0,m.jsx)(e3,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:(0,m.jsx)("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:(0,m.jsx)(er.Primitive.div,{...l,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});e4.displayName="SelectItemAlignedPosition";var e5=h.forwardRef((e,t)=>{let{__scopeSelect:n,align:r="start",collisionPadding:l=10,...a}=e,i=eB(n);return(0,m.jsx)(eN.Content,{...i,...a,ref:t,align:r,collisionPadding:l,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});e5.displayName="SelectPopperPosition";var[e3,e6]=ez(e$,{}),e7="SelectViewport",e8=h.forwardRef((e,t)=>{let{__scopeSelect:n,nonce:r,...l}=e,a=e0(e7,n),i=e6(e7,n),s=(0,Z.useComposedRefs)(t,a.onViewportChange),o=h.useRef(0);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),(0,m.jsx)(eP.Slot,{scope:n,children:(0,m.jsx)(er.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:(0,$.composeEventHandlers)(l.onScroll,e=>{let t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=i;if((null==r?void 0:r.current)&&n){let e=Math.abs(o.current-t.scrollTop);if(e>0){let r=window.innerHeight-20,l=Math.max(parseFloat(n.style.minHeight),parseFloat(n.style.height));if(l<r){let a=l+e,i=Math.min(r,a),s=a-i;n.style.height=i+"px","0px"===n.style.bottom&&(t.scrollTop=s>0?s:0,n.style.justifyContent="flex-end")}}}o.current=t.scrollTop})})})]})});e8.displayName=e7;var e9="SelectGroup",[te,tt]=ez(e9);h.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,l=(0,ej.useId)();return(0,m.jsx)(te,{scope:n,id:l,children:(0,m.jsx)(er.Primitive.div,{role:"group","aria-labelledby":l,...r,ref:t})})}).displayName=e9;var tn="SelectLabel";h.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,l=tt(tn,n);return(0,m.jsx)(er.Primitive.div,{id:l.id,...r,ref:t})}).displayName=tn;var tr="SelectItem",[tl,ta]=ez(tr),ti=h.forwardRef((e,t)=>{let{__scopeSelect:n,value:r,disabled:l=!1,textValue:a,...i}=e,s=eq(tr,n),o=e0(tr,n),d=s.value===r,[c,u]=h.useState(null!=a?a:""),[p,f]=h.useState(!1),x=(0,Z.useComposedRefs)(t,e=>{var t;return null==(t=o.itemRefCallback)?void 0:t.call(o,e,r,l)}),g=(0,ej.useId)(),v=h.useRef("touch"),b=()=>{l||(s.onValueChange(r),s.onOpenChange(!1))};if(""===r)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,m.jsx)(tl,{scope:n,value:r,disabled:l,textId:g,isSelected:d,onItemTextChange:h.useCallback(e=>{u(t=>{var n;return t||(null!=(n=null==e?void 0:e.textContent)?n:"").trim()})},[]),children:(0,m.jsx)(eP.ItemSlot,{scope:n,value:r,disabled:l,textValue:c,children:(0,m.jsx)(er.Primitive.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...i,ref:x,onFocus:(0,$.composeEventHandlers)(i.onFocus,()=>f(!0)),onBlur:(0,$.composeEventHandlers)(i.onBlur,()=>f(!1)),onClick:(0,$.composeEventHandlers)(i.onClick,()=>{"mouse"!==v.current&&b()}),onPointerUp:(0,$.composeEventHandlers)(i.onPointerUp,()=>{"mouse"===v.current&&b()}),onPointerDown:(0,$.composeEventHandlers)(i.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:(0,$.composeEventHandlers)(i.onPointerMove,e=>{if(v.current=e.pointerType,l){var t;null==(t=o.onItemLeave)||t.call(o)}else"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,$.composeEventHandlers)(i.onPointerLeave,e=>{if(e.currentTarget===document.activeElement){var t;null==(t=o.onItemLeave)||t.call(o)}}),onKeyDown:(0,$.composeEventHandlers)(i.onKeyDown,e=>{var t;((null==(t=o.searchRef)?void 0:t.current)===""||" "!==e.key)&&(eT.includes(e.key)&&b()," "===e.key&&e.preventDefault())})})})})});ti.displayName=tr;var ts="SelectItemText",to=h.forwardRef((e,t)=>{let{__scopeSelect:n,className:r,style:l,...a}=e,i=eq(ts,n),s=e0(ts,n),o=ta(ts,n),d=e_(ts,n),[c,u]=h.useState(null),p=(0,Z.useComposedRefs)(t,e=>u(e),o.onItemTextChange,e=>{var t;return null==(t=s.itemTextRefCallback)?void 0:t.call(s,e,o.value,o.disabled)}),f=null==c?void 0:c.textContent,x=h.useMemo(()=>(0,m.jsx)("option",{value:o.value,disabled:o.disabled,children:f},o.value),[o.disabled,o.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=d;return(0,eD.useLayoutEffect)(()=>(g(x),()=>v(x)),[g,v,x]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(er.Primitive.span,{id:o.textId,...a,ref:p}),o.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ef.createPortal(a.children,i.valueNode):null]})});to.displayName=ts;var td="SelectItemIndicator",tc=h.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return ta(td,n).isSelected?(0,m.jsx)(er.Primitive.span,{"aria-hidden":!0,...r,ref:t}):null});tc.displayName=td;var tu="SelectScrollUpButton",tm=h.forwardRef((e,t)=>{let n=e0(tu,e.__scopeSelect),r=e6(tu,e.__scopeSelect),[l,a]=h.useState(!1),i=(0,Z.useComposedRefs)(t,r.onScrollButtonChange);return(0,eD.useLayoutEffect)(()=>{if(n.viewport&&n.isPositioned){let e=function(){a(t.scrollTop>0)},t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),l?(0,m.jsx)(tf,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});tm.displayName=tu;var th="SelectScrollDownButton",tp=h.forwardRef((e,t)=>{let n=e0(th,e.__scopeSelect),r=e6(th,e.__scopeSelect),[l,a]=h.useState(!1),i=(0,Z.useComposedRefs)(t,r.onScrollButtonChange);return(0,eD.useLayoutEffect)(()=>{if(n.viewport&&n.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;a(Math.ceil(t.scrollTop)<e)},t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),l?(0,m.jsx)(tf,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});tp.displayName=th;var tf=h.forwardRef((e,t)=>{let{__scopeSelect:n,onAutoScroll:r,...l}=e,a=e0("SelectScrollButton",n),i=h.useRef(null),s=eO(n),o=h.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return h.useEffect(()=>()=>o(),[o]),(0,eD.useLayoutEffect)(()=>{var e;let t=s().find(e=>e.ref.current===document.activeElement);null==t||null==(e=t.ref.current)||e.scrollIntoView({block:"nearest"})},[s]),(0,m.jsx)(er.Primitive.div,{"aria-hidden":!0,...l,ref:t,style:{flexShrink:0,...l.style},onPointerDown:(0,$.composeEventHandlers)(l.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(r,50))}),onPointerMove:(0,$.composeEventHandlers)(l.onPointerMove,()=>{var e;null==(e=a.onItemLeave)||e.call(a),null===i.current&&(i.current=window.setInterval(r,50))}),onPointerLeave:(0,$.composeEventHandlers)(l.onPointerLeave,()=>{o()})})});h.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return(0,m.jsx)(er.Primitive.div,{"aria-hidden":!0,...r,ref:t})}).displayName="SelectSeparator";var tx="SelectArrow";h.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,l=eB(n),a=eq(tx,n),i=e0(tx,n);return a.open&&"popper"===i.position?(0,m.jsx)(eN.Arrow,{...l,...r,ref:t}):null}).displayName=tx;var tg=h.forwardRef((e,t)=>{let{__scopeSelect:n,value:r,...l}=e,a=h.useRef(null),i=(0,Z.useComposedRefs)(t,a),s=et(r);return h.useEffect(()=>{let e=a.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(s!==r&&t){let n=new Event("change",{bubbles:!0});t.call(e,r),e.dispatchEvent(n)}},[s,r]),(0,m.jsx)(er.Primitive.select,{...l,style:{...eE.VISUALLY_HIDDEN_STYLES,...l.style},ref:i,defaultValue:r})});function tv(e){return""===e||void 0===e}function tb(e){let t=(0,ek.useCallbackRef)(e),n=h.useRef(""),r=h.useRef(0),l=h.useCallback(e=>{let l=n.current+e;t(l),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(l)},[t]),a=h.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,l,a]}function ty(e,t,n){var r,l;let a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1,s=(r=e,l=Math.max(i,0),r.map((e,t)=>r[(l+t)%r.length]));1===a.length&&(s=s.filter(e=>e!==n));let o=s.find(e=>e.textValue.toLowerCase().startsWith(a.toLowerCase()));return o!==n?o:void 0}tg.displayName="SelectBubbleInput";var tw=e.i(78784);let tj=(0,R.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),tN=(0,R.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function tC(e){let{...t}=e;return(0,m.jsx)(eV,{"data-slot":"select",...t})}function tS(e){let{...t}=e;return(0,m.jsx)(eY,{"data-slot":"select-value",...t})}function tk(e){let{className:t,size:n="default",children:r,...l}=e;return(0,m.jsxs)(eW,{"data-slot":"select-trigger","data-size":n,className:(0,L.cn)("border-2 border-gray-300 data-[placeholder]:text-gray-500 [&_svg:not([class*='text-'])]:text-gray-500 focus-visible:border-blue-500 focus-visible:ring-blue-500/20 aria-invalid:ring-red-500/20 aria-invalid:border-red-500 bg-white hover:bg-gray-50 hover:border-gray-400 flex w-full items-center justify-between gap-2 rounded-none border px-4 py-3 text-base whitespace-nowrap shadow-sm transition-all duration-200 ease-in-out outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-12 data-[size=sm]:h-10 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-5",t),...l,children:[r,(0,m.jsx)(eJ,{asChild:!0,children:(0,m.jsx)(tj,{className:"size-5 text-gray-600 transition-transform duration-200 data-[state=open]:rotate-180"})})]})}function tD(e){let{className:t,children:n,position:r="popper",...l}=e;return(0,m.jsx)(eG,{children:(0,m.jsxs)(eZ,{"data-slot":"select-content",className:(0,L.cn)("bg-white text-gray-900 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-none border-2 border-gray-300 shadow-2xl","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...l,children:[(0,m.jsx)(tR,{}),(0,m.jsx)(e8,{className:(0,L.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),(0,m.jsx)(tM,{})]})})}function tE(e){let{className:t,children:n,...r}=e;return(0,m.jsxs)(ti,{"data-slot":"select-item",className:(0,L.cn)("focus:bg-blue-50 focus:text-blue-900 hover:bg-gray-50 [&_svg:not([class*='text-'])]:text-gray-600 relative flex w-full cursor-pointer items-center gap-2 rounded-none py-3 pr-10 pl-4 text-base outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 transition-colors duration-150 ease-in-out [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,m.jsx)("span",{className:"absolute right-4 flex size-4 items-center justify-center",children:(0,m.jsx)(tc,{children:(0,m.jsx)(tw.CheckIcon,{className:"size-5 text-blue-600"})})}),(0,m.jsx)(to,{children:n})]})}function tR(e){let{className:t,...n}=e;return(0,m.jsx)(tm,{"data-slot":"select-scroll-up-button",className:(0,L.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,m.jsx)(tN,{className:"size-4"})})}function tM(e){let{className:t,...n}=e;return(0,m.jsx)(tp,{"data-slot":"select-scroll-down-button",className:(0,L.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,m.jsx)(tj,{className:"size-4"})})}var tI=e.i(14544),tT=e.i(46932);e.i(47167);var tL=e.i(31178),tP=e.i(47414),tO=e.i(74008),tF=e.i(21476),tz=e.i(72846),tA=h,tB=e.i(37806);class tU extends tA.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=(0,tz.isHTMLElement)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tq(e){let{children:t,isPresent:n,anchorX:r,root:l}=e,a=(0,tA.useId)(),i=(0,tA.useRef)(null),s=(0,tA.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,tA.useContext)(tB.MotionConfigContext);return(0,tA.useInsertionEffect)(()=>{let{width:e,height:t,top:d,left:c,right:u}=s.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=a;let m=document.createElement("style");o&&(m.nonce=o);let h=null!=l?l:document.head;return h.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===r?"left: ".concat(c):"right: ".concat(u),"px !important;\n            top: ").concat(d,"px !important;\n          }\n        ")),()=>{h.contains(m)&&h.removeChild(m)}},[n]),(0,m.jsx)(tU,{isPresent:n,childRef:i,sizeRef:s,children:tA.cloneElement(t,{ref:i})})}let tH=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:l,custom:a,presenceAffectsLayout:i,mode:s,anchorX:o,root:d}=e,c=(0,tP.useConstant)(t_),u=(0,h.useId)(),p=!0,f=(0,h.useMemo)(()=>(p=!1,{id:u,initial:n,isPresent:r,custom:a,onExitComplete:e=>{for(let t of(c.set(e,!0),c.values()))if(!t)return;l&&l()},register:e=>(c.set(e,!1),()=>c.delete(e))}),[r,c,l]);return i&&p&&(f={...f}),(0,h.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[r]),h.useEffect(()=>{r||c.size||!l||l()},[r]),"popLayout"===s&&(t=(0,m.jsx)(tq,{isPresent:r,anchorX:o,root:d,children:t})),(0,m.jsx)(tF.PresenceContext.Provider,{value:f,children:t})};function t_(){return new Map}var tV=e.i(64978);let tK=e=>e.key||"";function tW(e){let t=[];return h.Children.forEach(e,e=>{(0,h.isValidElement)(e)&&t.push(e)}),t}let tX=e=>{let{children:t,custom:n,initial:r=!0,onExitComplete:l,presenceAffectsLayout:a=!0,mode:i="sync",propagate:s=!1,anchorX:o="left",root:d}=e,[c,u]=(0,tV.usePresence)(s),p=(0,h.useMemo)(()=>tW(t),[t]),f=s&&!c?[]:p.map(tK),x=(0,h.useRef)(!0),g=(0,h.useRef)(p),v=(0,tP.useConstant)(()=>new Map),[b,y]=(0,h.useState)(p),[w,j]=(0,h.useState)(p);(0,tO.useIsomorphicLayoutEffect)(()=>{x.current=!1,g.current=p;for(let e=0;e<w.length;e++){let t=tK(w[e]);f.includes(t)?v.delete(t):!0!==v.get(t)&&v.set(t,!1)}},[w,f.length,f.join("-")]);let N=[];if(p!==b){let e=[...p];for(let t=0;t<w.length;t++){let n=w[t],r=tK(n);f.includes(r)||(e.splice(t,0,n),N.push(n))}return"wait"===i&&N.length&&(e=N),j(tW(e)),y(p),null}let{forceRender:C}=(0,h.useContext)(tL.LayoutGroupContext);return(0,m.jsx)(m.Fragment,{children:w.map(e=>{let t=tK(e),h=(!s||!!c)&&(p===w||f.includes(t));return(0,m.jsx)(tH,{isPresent:h,initial:(!x.current||!!r)&&void 0,custom:n,presenceAffectsLayout:a,mode:i,root:d,onExitComplete:h?void 0:()=>{if(!v.has(t))return;v.set(t,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null==C||C(),j(g.current),s&&(null==u||u()),l&&l())},anchorX:o,children:e},t)})})},tY="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function tJ(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function tG(e){return"nodeType"in e}function t$(e){var t,n;return e?tJ(e)?e:tG(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function tZ(e){let{Document:t}=t$(e);return e instanceof t}function tQ(e){return!tJ(e)&&e instanceof t$(e).HTMLElement}function t0(e){return e instanceof t$(e).SVGElement}function t1(e){return e?tJ(e)?e.document:tG(e)?tZ(e)?e:tQ(e)||t0(e)?e.ownerDocument:document:document:document}let t2=tY?h.useLayoutEffect:h.useEffect;function t4(e){let t=(0,h.useRef)(e);return t2(()=>{t.current=e}),(0,h.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function t5(e,t){void 0===t&&(t=[e]);let n=(0,h.useRef)(e);return t2(()=>{n.current!==e&&(n.current=e)},t),n}function t3(e,t){let n=(0,h.useRef)();return(0,h.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function t6(e){let t=t4(e),n=(0,h.useRef)(null),r=(0,h.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function t7(e){let t=(0,h.useRef)();return(0,h.useEffect)(()=>{t.current=e},[e]),t.current}let t8={};function t9(e,t){return(0,h.useMemo)(()=>{if(t)return t;let n=null==t8[e]?0:t8[e]+1;return t8[e]=n,e+"-"+n},[e,t])}function ne(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return r.reduce((t,n)=>{for(let[r,l]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*l)}return t},{...t})}}let nt=ne(1),nn=ne(-1);function nr(e){if(!e)return!1;let{KeyboardEvent:t}=t$(e.target);return t&&e instanceof t}function nl(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=t$(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let na=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[na.Translate.toString(e),na.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),ni="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",ns={display:"none"};function no(e){let{id:t,value:n}=e;return h.default.createElement("div",{id:t,style:ns},n)}function nd(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return h.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}let nc=(0,h.createContext)(null),nu={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},nm={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function nh(e){let{announcements:t=nm,container:n,hiddenTextDescribedById:r,screenReaderInstructions:l=nu}=e,{announce:a,announcement:i}=function(){let[e,t]=(0,h.useState)("");return{announce:(0,h.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),s=t9("DndLiveRegion"),[o,d]=(0,h.useState)(!1);(0,h.useEffect)(()=>{d(!0)},[]);var c=(0,h.useMemo)(()=>({onDragStart(e){let{active:n}=e;a(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&a(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;a(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;a(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;a(t.onDragCancel({active:n,over:r}))}}),[a,t]);let u=(0,h.useContext)(nc);if((0,h.useEffect)(()=>{if(!u)throw Error("useDndMonitor must be used within a children of <DndContext>");return u(c)},[c,u]),!o)return null;let m=h.default.createElement(h.default.Fragment,null,h.default.createElement(no,{id:r,value:l.draggable}),h.default.createElement(nd,{id:s,announcement:i}));return n?(0,ef.createPortal)(m,n):m}function np(){}function nf(e,t){return(0,h.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(n||(n={}));let nx=Object.freeze({x:0,y:0});function ng(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function nv(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function nb(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ny(e){let{left:t,top:n,height:r,width:l}=e;return[{x:t,y:n},{x:t+l,y:n},{x:t,y:n+r},{x:t+l,y:n+r}]}function nw(e,t){if(!e||0===e.length)return null;let[n]=e;return t?n[t]:n}function nj(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}let nN=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,l=nj(t,t.left,t.top),a=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=ng(nj(r),l);a.push({id:t,data:{droppableContainer:e,value:n}})}}return a.sort(nv)},nC=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,l=[];for(let e of r){let{id:r}=e,a=n.get(r);if(a){let n=function(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);if(r<l&&n<a){let i=t.width*t.height,s=e.width*e.height,o=(l-r)*(a-n);return Number((o/(i+s-o)).toFixed(4))}return 0}(a,t);n>0&&l.push({id:r,data:{droppableContainer:e,value:n}})}}return l.sort(nb)};function nS(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:nx}let nk=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}(1),nD={ignoreTransform:!1};function nE(e,t){void 0===t&&(t=nD);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=t$(e).getComputedStyle(e);t&&(n=function(e,t,n){let r=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;let{scaleX:l,scaleY:a,x:i,y:s}=r,o=e.left-i-(1-l)*parseFloat(n),d=e.top-s-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),c=l?e.width/l:e.width,u=a?e.height/a:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(n,t,r))}let{top:r,left:l,width:a,height:i,bottom:s,right:o}=n;return{top:r,left:l,width:a,height:i,bottom:s,right:o}}function nR(e){return nE(e,{ignoreTransform:!0})}function nM(e,t){let n=[];return e?function r(l){var a;if(null!=t&&n.length>=t||!l)return n;if(tZ(l)&&null!=l.scrollingElement&&!n.includes(l.scrollingElement))return n.push(l.scrollingElement),n;if(!tQ(l)||t0(l)||n.includes(l))return n;let i=t$(e).getComputedStyle(l);return(l!==e&&function(e,t){void 0===t&&(t=t$(e).getComputedStyle(e));let n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let r=t[e];return"string"==typeof r&&n.test(r)})}(l,i)&&n.push(l),void 0===(a=i)&&(a=t$(l).getComputedStyle(l)),"fixed"===a.position)?n:r(l.parentNode)}(e):n}function nI(e){let[t]=nM(e,1);return null!=t?t:null}function nT(e){return tY&&e?tJ(e)?e:tG(e)?tZ(e)||e===t1(e).scrollingElement?window:tQ(e)?e:null:null:null}function nL(e){return tJ(e)?e.scrollX:e.scrollLeft}function nP(e){return tJ(e)?e.scrollY:e.scrollTop}function nO(e){return{x:nL(e),y:nP(e)}}function nF(e){return!!tY&&!!e&&e===document.scrollingElement}function nz(e){let t={x:0,y:0},n=nF(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},l=e.scrollTop<=t.y,a=e.scrollLeft<=t.x;return{isTop:l,isLeft:a,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(r||(r={}));let nA={x:.2,y:.2};function nB(e){return e.reduce((e,t)=>nt(e,nO(t)),nx)}let nU=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+nL(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+nP(t),0)}]];class nq{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=nM(t),r=nB(n);for(let[t,l,a]of(this.rect={...e},this.width=e.width,this.height=e.height,nU))for(let e of l)Object.defineProperty(this,e,{get:()=>{let l=a(n),i=r[t]-l;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class nH{add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}}function n_(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function nV(e){e.preventDefault()}function nK(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(l||(l={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(a||(a={}));let nW={start:[a.Space,a.Enter],cancel:[a.Esc],end:[a.Space,a.Enter,a.Tab]},nX=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case a.Right:return{...n,x:n.x+25};case a.Left:return{...n,x:n.x-25};case a.Down:return{...n,y:n.y+25};case a.Up:return{...n,y:n.y-25}}};class nY{attach(){this.handleStart(),this.windowListeners.add(l.Resize,this.handleCancel),this.windowListeners.add(l.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(l.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=nE),!e)return;let{top:n,left:r,bottom:l,right:a}=t(e);nI(e)&&(l<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(nx)}handleKeyDown(e){if(nr(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:l=nW,coordinateGetter:i=nX,scrollBehavior:s="smooth"}=r,{code:o}=e;if(l.end.includes(o))return void this.handleEnd(e);if(l.cancel.includes(o))return void this.handleCancel(e);let{collisionRect:d}=n.current,c=d?{x:d.left,y:d.top}:nx;this.referenceCoordinates||(this.referenceCoordinates=c);let u=i(e,{active:t,context:n.current,currentCoordinates:c});if(u){let t=nn(u,c),r={x:0,y:0},{scrollableAncestors:l}=n.current;for(let n of l){let l=e.code,{isTop:i,isRight:o,isLeft:d,isBottom:c,maxScroll:m,minScroll:h}=nz(n),p=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:l}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:l,width:e.clientWidth,height:e.clientHeight}}(n),f={x:Math.min(l===a.Right?p.right-p.width/2:p.right,Math.max(l===a.Right?p.left:p.left+p.width/2,u.x)),y:Math.min(l===a.Down?p.bottom-p.height/2:p.bottom,Math.max(l===a.Down?p.top:p.top+p.height/2,u.y))},x=l===a.Right&&!o||l===a.Left&&!d,g=l===a.Down&&!c||l===a.Up&&!i;if(x&&f.x!==u.x){let e=n.scrollLeft+t.x,i=l===a.Right&&e<=m.x||l===a.Left&&e>=h.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:s});i?r.x=n.scrollLeft-e:r.x=l===a.Right?n.scrollLeft-m.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(g&&f.y!==u.y){let e=n.scrollTop+t.y,i=l===a.Down&&e<=m.y||l===a.Up&&e>=h.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:s});i?r.y=n.scrollTop-e:r.y=l===a.Down?n.scrollTop-m.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,nt(nn(u,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new nH(t1(t)),this.windowListeners=new nH(t$(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}}function nJ(e){return!!(e&&"distance"in e)}function nG(e){return!!(e&&"delay"in e)}nY.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=nW,onActivation:l}=t,{active:a}=n,{code:i}=e.nativeEvent;if(r.start.includes(i)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class n${attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(l.Resize,this.handleCancel),this.windowListeners.add(l.DragStart,nV),this.windowListeners.add(l.VisibilityChange,this.handleCancel),this.windowListeners.add(l.ContextMenu,nV),this.documentListeners.add(l.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nG(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(nJ(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(l.Click,nK,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(l.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:l}=this,{onMove:a,options:{activationConstraint:i}}=l;if(!r)return;let s=null!=(t=nl(e))?t:nx,o=nn(r,s);if(!n&&i){if(nJ(i)){if(null!=i.tolerance&&n_(o,i.tolerance))return this.handleCancel();if(n_(o,i.distance))return this.handleStart()}return nG(i)&&n_(o,i.tolerance)?this.handleCancel():void this.handlePending(i,o)}e.cancelable&&e.preventDefault(),a(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===a.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}constructor(e,t,n){var r;void 0===n&&(n=function(e){let{EventTarget:t}=t$(e);return e instanceof t?e:t1(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=t1(a),this.documentListeners=new nH(this.document),this.listeners=new nH(n),this.windowListeners=new nH(t$(a)),this.initialCoordinates=null!=(r=nl(l))?r:nx,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}}let nZ={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nQ extends n${constructor(e){let{event:t}=e;super(e,nZ,t1(t.target))}}nQ.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];!function(e){e[e.RightClick=2]="RightClick"}(i||(i={}));!function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(s||(s={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(o||(o={}));let n0={x:{[r.Backward]:!1,[r.Forward]:!1},y:{[r.Backward]:!1,[r.Forward]:!1}};!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(d||(d={})),(c||(c={})).Optimized="optimized";let n1=new Map;function n2(e,t){return t3(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function n4(e){let{callback:t,disabled:n}=e,r=t4(t),l=(0,h.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,h.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}function n5(e){return new nq(nE(e),e)}function n3(e,t,n){void 0===t&&(t=n5);let[r,l]=(0,h.useState)(null);function a(){l(r=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=r?r:n)?l:null}let a=t(e);return JSON.stringify(r)===JSON.stringify(a)?r:a})}let i=function(e){let{callback:t,disabled:n}=e,r=t4(t),l=(0,h.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,h.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){a();break}}}}),s=n4({callback:a});return t2(()=>{a(),e?(null==s||s.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==i||i.disconnect())},[e]),r}let n6=[];function n7(e,t){void 0===t&&(t=[]);let n=(0,h.useRef)(null);return(0,h.useEffect)(()=>{n.current=null},t),(0,h.useEffect)(()=>{let t=e!==nx;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?nn(e,n.current):nx}function n8(e){return(0,h.useMemo)(()=>e?function(e){let t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}let n9=[],re=[{sensor:nQ,options:{}},{sensor:nY,options:{}}],rt={current:{}},rn={draggable:{measure:nR},droppable:{measure:nR,strategy:d.WhileDragging,frequency:c.Optimized},dragOverlay:{measure:nE}};class rr extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let rl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:np},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rn,measureDroppableContainers:np,windowRect:null,measuringScheduled:!1},ra={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:np,draggableNodes:new Map,over:null,measureDroppableContainers:np},ri=(0,h.createContext)(ra),rs=(0,h.createContext)(rl);function ro(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rr}}}function rd(e,t){switch(t.type){case n.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case n.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case n.DragEnd:case n.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case n.RegisterDroppable:{let{element:n}=t,{id:r}=n,l=new rr(e.droppable.containers);return l.set(r,n),{...e,droppable:{...e.droppable,containers:l}}}case n.SetDroppableDisabled:{let{id:n,key:r,disabled:l}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;let i=new rr(e.droppable.containers);return i.set(n,{...a,disabled:l}),{...e,droppable:{...e.droppable,containers:i}}}case n.UnregisterDroppable:{let{id:n,key:r}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;let a=new rr(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function rc(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:l}=(0,h.useContext)(ri),a=t7(r),i=t7(null==n?void 0:n.id);return(0,h.useEffect)(()=>{if(!t&&!r&&a&&null!=i){if(!nr(a)||document.activeElement===a.target)return;let e=l.get(i);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=e.matches(ni)?e:e.querySelector(ni);if(t){t.focus();break}}})}},[r,t,l,i,a]),null}let ru=(0,h.createContext)({...nx,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(u||(u={}));let rm=(0,h.memo)(function(e){var t,l,a,i,c,m;let{id:p,accessibility:f,autoScroll:x=!0,children:g,sensors:v=re,collisionDetection:b=nC,measuring:y,modifiers:w,...j}=e,[N,C]=(0,h.useReducer)(rd,void 0,ro),[S,k]=function(){let[e]=(0,h.useState)(()=>new Set),t=(0,h.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,h.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[D,E]=(0,h.useState)(u.Uninitialized),R=D===u.Initialized,{draggable:{active:M,nodes:I,translate:T},droppable:{containers:L}}=N,P=null!=M?I.get(M):null,O=(0,h.useRef)({initial:null,translated:null}),F=(0,h.useMemo)(()=>{var e;return null!=M?{id:M,data:null!=(e=null==P?void 0:P.data)?e:rt,rect:O}:null},[M,P]),z=(0,h.useRef)(null),[A,B]=(0,h.useState)(null),[U,q]=(0,h.useState)(null),H=t5(j,Object.values(j)),_=t9("DndDescribedBy",p),V=(0,h.useMemo)(()=>L.getEnabled(),[L]),K=(0,h.useMemo)(()=>({draggable:{...rn.draggable,...null==y?void 0:y.draggable},droppable:{...rn.droppable,...null==y?void 0:y.droppable},dragOverlay:{...rn.dragOverlay,...null==y?void 0:y.dragOverlay}}),[null==y?void 0:y.draggable,null==y?void 0:y.droppable,null==y?void 0:y.dragOverlay]),{droppableRects:W,measureDroppableContainers:X,measuringScheduled:Y}=function(e,t){let{dragging:n,dependencies:r,config:l}=t,[a,i]=(0,h.useState)(null),{frequency:s,measure:o,strategy:c}=l,u=(0,h.useRef)(e),m=function(){switch(c){case d.Always:return!1;case d.BeforeDragging:return n;default:return!n}}(),p=t5(m),f=(0,h.useCallback)(function(e){void 0===e&&(e=[]),p.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),x=(0,h.useRef)(null),g=t3(t=>{if(m&&!n)return n1;if(!t||t===n1||u.current!==e||null!=a){let t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new nq(o(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,a,n,m,o]);return(0,h.useEffect)(()=>{u.current=e},[e]),(0,h.useEffect)(()=>{m||f()},[n,m]),(0,h.useEffect)(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),(0,h.useEffect)(()=>{m||"number"!=typeof s||null!==x.current||(x.current=setTimeout(()=>{f(),x.current=null},s))},[s,m,f,...r]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=a}}(V,{dragging:R,dependencies:[T.x,T.y],config:K.droppable}),J=function(e,t){let n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return t3(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(I,M),G=(0,h.useMemo)(()=>U?nl(U):null,[U]),$=function(){let e=(null==A?void 0:A.autoScrollEnabled)===!1,t="object"==typeof x?!1===x.enabled:!1===x,n=R&&!e&&!t;return"object"==typeof x?{...x,enabled:n}:{enabled:n}}(),Z=n2(J,K.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:l=!0}=e,a=(0,h.useRef)(!1),{x:i,y:s}="boolean"==typeof l?{x:l,y:l}:l;t2(()=>{if(!i&&!s||!t){a.current=!1;return}if(a.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=nS(n(e),r);if(i||(l.x=0),s||(l.y=0),a.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=nI(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,i,s,r,n])}({activeNode:null!=M?I.get(M):null,config:$.layoutShiftCompensation,initialRect:Z,measure:K.draggable.measure});let Q=n3(J,K.draggable.measure,Z),ee=n3(J?J.parentElement:null),et=(0,h.useRef)({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:W,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),en=L.getNodeFor(null==(t=et.current.over)?void 0:t.id),er=function(e){let{measure:t}=e,[n,r]=(0,h.useState)(null),l=n4({callback:(0,h.useCallback)(e=>{for(let{target:n}of e)if(tQ(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),[a,i]=t6((0,h.useCallback)(e=>{let n=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return tQ(t)?t:e}(e);null==l||l.disconnect(),n&&(null==l||l.observe(n)),r(n?t(n):null)},[t,l]));return(0,h.useMemo)(()=>({nodeRef:a,rect:n,setRef:i}),[n,a,i])}({measure:K.dragOverlay.measure}),el=null!=(l=er.nodeRef.current)?l:J,ea=R?null!=(a=er.rect)?a:Q:null,ei=!!(er.nodeRef.current&&er.rect),es=function(e){let t=n2(e);return nS(e,t)}(ei?null:Q),eo=n8(el?t$(el):null),ed=function(e){let t=(0,h.useRef)(e),n=t3(n=>e?n&&n!==n6&&e&&t.current&&e.parentNode===t.current.parentNode?n:nM(e):n6,[e]);return(0,h.useEffect)(()=>{t.current=e},[e]),n}(R?null!=en?en:J:null),ec=function(e,t){void 0===t&&(t=nE);let[n]=e,r=n8(n?t$(n):null),[l,a]=(0,h.useState)(n9);function i(){a(()=>e.length?e.map(e=>nF(e)?r:new nq(t(e),e)):n9)}let s=n4({callback:i});return t2(()=>{null==s||s.disconnect(),i(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),l}(ed),eu=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}(w,{transform:{x:T.x-es.x,y:T.y-es.y,scaleX:1,scaleY:1},activatorEvent:U,active:F,activeNodeRect:Q,containerNodeRect:ee,draggingNodeRect:ea,over:et.current.over,overlayNodeRect:er.rect,scrollableAncestors:ed,scrollableAncestorRects:ec,windowRect:eo}),em=G?nt(G,T):null,eh=function(e){let[t,n]=(0,h.useState)(null),r=(0,h.useRef)(e),l=(0,h.useCallback)(e=>{let t=nT(e.target);t&&n(e=>e?(e.set(t,nO(t)),new Map(e)):null)},[]);return(0,h.useEffect)(()=>{let t=r.current;if(e!==t){a(t);let i=e.map(e=>{let t=nT(e);return t?(t.addEventListener("scroll",l,{passive:!0}),[t,nO(t)]):null}).filter(e=>null!=e);n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{let t=nT(e);null==t||t.removeEventListener("scroll",l)})}},[l,e]),(0,h.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>nt(e,t),nx):nB(e):nx,[e,t])}(ed),ep=n7(eh),ex=n7(eh,[Q]),eg=nt(eu,ep),ev=ea?nk(ea,eu):null,eb=F&&ev?b({active:F,collisionRect:ev,droppableRects:W,droppableContainers:V,pointerCoordinates:em}):null,ey=nw(eb,"id"),[ew,ej]=(0,h.useState)(null),eN=(c=ei?eu:nt(eu,ex),m=null!=(i=null==ew?void 0:ew.rect)?i:null,{...c,scaleX:m&&Q?m.width/Q.width:1,scaleY:m&&Q?m.height/Q.height:1}),eC=(0,h.useRef)(null),eS=(0,h.useCallback)((e,t)=>{let{sensor:r,options:l}=t;if(null==z.current)return;let a=I.get(z.current);if(!a)return;let i=e.nativeEvent,s=new r({active:z.current,activeNode:a,event:i,options:l,context:et,onAbort(e){if(!I.get(e))return;let{onDragAbort:t}=H.current,n={id:e};null==t||t(n),S({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!I.get(e))return;let{onDragPending:l}=H.current,a={id:e,constraint:t,initialCoordinates:n,offset:r};null==l||l(a),S({type:"onDragPending",event:a})},onStart(e){let t=z.current;if(null==t)return;let r=I.get(t);if(!r)return;let{onDragStart:l}=H.current,a={activatorEvent:i,active:{id:t,data:r.data,rect:O}};(0,ef.unstable_batchedUpdates)(()=>{null==l||l(a),E(u.Initializing),C({type:n.DragStart,initialCoordinates:e,active:t}),S({type:"onDragStart",event:a}),B(eC.current),q(i)})},onMove(e){C({type:n.DragMove,coordinates:e})},onEnd:o(n.DragEnd),onCancel:o(n.DragCancel)});function o(e){return async function(){let{active:t,collisions:r,over:l,scrollAdjustedTranslate:a}=et.current,s=null;if(t&&a){let{cancelDrop:o}=H.current;s={activatorEvent:i,active:t,collisions:r,delta:a,over:l},e===n.DragEnd&&"function"==typeof o&&await Promise.resolve(o(s))&&(e=n.DragCancel)}z.current=null,(0,ef.unstable_batchedUpdates)(()=>{C({type:e}),E(u.Uninitialized),ej(null),B(null),q(null),eC.current=null;let t=e===n.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=H.current[t];null==e||e(s),S({type:t,event:s})}})}}eC.current=s},[I]),ek=(0,h.useCallback)((e,t)=>(n,r)=>{let l=n.nativeEvent,a=I.get(r);null!==z.current||!a||l.dndKit||l.defaultPrevented||!0===e(n,t.options,{active:a})&&(l.dndKit={capturedBy:t.sensor},z.current=r,eS(n,t))},[I,eS]),eD=(0,h.useMemo)(()=>v.reduce((e,t)=>{let{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:ek(e.handler,t)}))]},[]),[v,ek]);(0,h.useEffect)(()=>{if(!tY)return;let e=v.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},v.map(e=>{let{sensor:t}=e;return t})),t2(()=>{Q&&D===u.Initializing&&E(u.Initialized)},[Q,D]),(0,h.useEffect)(()=>{let{onDragMove:e}=H.current,{active:t,activatorEvent:n,collisions:r,over:l}=et.current;if(!t||!n)return;let a={active:t,activatorEvent:n,collisions:r,delta:{x:eg.x,y:eg.y},over:l};(0,ef.unstable_batchedUpdates)(()=>{null==e||e(a),S({type:"onDragMove",event:a})})},[eg.x,eg.y]),(0,h.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:l}=et.current;if(!e||null==z.current||!t||!l)return;let{onDragOver:a}=H.current,i=r.get(ey),s=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,o={active:e,activatorEvent:t,collisions:n,delta:{x:l.x,y:l.y},over:s};(0,ef.unstable_batchedUpdates)(()=>{ej(s),null==a||a(o),S({type:"onDragOver",event:o})})},[ey]),t2(()=>{et.current={activatorEvent:U,active:F,activeNode:J,collisionRect:ev,collisions:eb,droppableRects:W,draggableNodes:I,draggingNode:el,draggingNodeRect:ea,droppableContainers:L,over:ew,scrollableAncestors:ed,scrollAdjustedTranslate:eg},O.current={initial:ea,translated:ev}},[F,J,eb,ev,I,el,ea,W,L,ew,ed,eg]),function(e){let{acceleration:t,activator:n=s.Pointer,canScroll:l,draggingRect:a,enabled:i,interval:d=5,order:c=o.TreeOrder,pointerCoordinates:u,scrollableAncestors:m,scrollableAncestorRects:p,delta:f,threshold:x}=e,g=function(e){let{delta:t,disabled:n}=e,l=t7(t);return t3(e=>{if(n||!l||!e)return n0;let a={x:Math.sign(t.x-l.x),y:Math.sign(t.y-l.y)};return{x:{[r.Backward]:e.x[r.Backward]||-1===a.x,[r.Forward]:e.x[r.Forward]||1===a.x},y:{[r.Backward]:e.y[r.Backward]||-1===a.y,[r.Forward]:e.y[r.Forward]||1===a.y}}},[n,t,l])}({delta:f,disabled:!i}),[v,b]=function(){let e=(0,h.useRef)(null);return[(0,h.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,h.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),y=(0,h.useRef)({x:0,y:0}),w=(0,h.useRef)({x:0,y:0}),j=(0,h.useMemo)(()=>{switch(n){case s.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case s.DraggableRect:return a}},[n,a,u]),N=(0,h.useRef)(null),C=(0,h.useCallback)(()=>{let e=N.current;if(!e)return;let t=y.current.x*w.current.x,n=y.current.y*w.current.y;e.scrollBy(t,n)},[]),S=(0,h.useMemo)(()=>c===o.TreeOrder?[...m].reverse():m,[c,m]);(0,h.useEffect)(()=>{if(!i||!m.length||!j)return void b();for(let e of S){if((null==l?void 0:l(e))===!1)continue;let n=p[m.indexOf(e)];if(!n)continue;let{direction:a,speed:i}=function(e,t,n,l,a){let{top:i,left:s,right:o,bottom:d}=n;void 0===l&&(l=10),void 0===a&&(a=nA);let{isTop:c,isBottom:u,isLeft:m,isRight:h}=nz(e),p={x:0,y:0},f={x:0,y:0},x={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+x.height?(p.y=r.Backward,f.y=l*Math.abs((t.top+x.height-i)/x.height)):!u&&d>=t.bottom-x.height&&(p.y=r.Forward,f.y=l*Math.abs((t.bottom-x.height-d)/x.height)),!h&&o>=t.right-x.width?(p.x=r.Forward,f.x=l*Math.abs((t.right-x.width-o)/x.width)):!m&&s<=t.left+x.width&&(p.x=r.Backward,f.x=l*Math.abs((t.left+x.width-s)/x.width)),{direction:p,speed:f}}(e,n,j,t,x);for(let e of["x","y"])g[e][a[e]]||(i[e]=0,a[e]=0);if(i.x>0||i.y>0){b(),N.current=e,v(C,d),y.current=i,w.current=a;return}}y.current={x:0,y:0},w.current={x:0,y:0},b()},[t,C,l,b,i,d,JSON.stringify(j),JSON.stringify(g),v,m,S,p,JSON.stringify(x)])}({...$,delta:T,draggingRect:ev,pointerCoordinates:em,scrollableAncestors:ed,scrollableAncestorRects:ec});let eE=(0,h.useMemo)(()=>({active:F,activeNode:J,activeNodeRect:Q,activatorEvent:U,collisions:eb,containerNodeRect:ee,dragOverlay:er,draggableNodes:I,droppableContainers:L,droppableRects:W,over:ew,measureDroppableContainers:X,scrollableAncestors:ed,scrollableAncestorRects:ec,measuringConfiguration:K,measuringScheduled:Y,windowRect:eo}),[F,J,Q,U,eb,ee,er,I,L,W,ew,X,ed,ec,K,Y,eo]),eR=(0,h.useMemo)(()=>({activatorEvent:U,activators:eD,active:F,activeNodeRect:Q,ariaDescribedById:{draggable:_},dispatch:C,draggableNodes:I,over:ew,measureDroppableContainers:X}),[U,eD,F,Q,C,_,I,ew,X]);return h.default.createElement(nc.Provider,{value:k},h.default.createElement(ri.Provider,{value:eR},h.default.createElement(rs.Provider,{value:eE},h.default.createElement(ru.Provider,{value:eN},g)),h.default.createElement(rc,{disabled:(null==f?void 0:f.restoreFocus)===!1})),h.default.createElement(nh,{...f,hiddenTextDescribedById:_}))}),rh=(0,h.createContext)(null),rp="button",rf={timeout:25},rx={position:"fixed",touchAction:"none"},rg=e=>nr(e)?"transform 250ms ease":void 0;t={styles:{active:{opacity:"0"}}},e=>{let{active:n,dragOverlay:r}=e,l={},{styles:a,className:i}=t;if(null!=a&&a.active)for(let[e,t]of Object.entries(a.active))void 0!==t&&(l[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=a&&a.dragOverlay)for(let[e,t]of Object.entries(a.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=i&&i.active&&n.node.classList.add(i.active),null!=i&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(let[e,t]of Object.entries(l))n.node.style.setProperty(e,t);null!=i&&i.active&&n.node.classList.remove(i.active)}};function rv(e,t,n){let r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function rb(e){return null!==e&&e>=0}let ry=e=>{let{rects:t,activeIndex:n,overIndex:r,index:l}=e,a=rv(t,r,n),i=t[l],s=a[l];return s&&i?{x:s.left-i.left,y:s.top-i.top,scaleX:s.width/i.width,scaleY:s.height/i.height}:null},rw={scaleX:1,scaleY:1},rj=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:l,rects:a,overIndex:i}=e,s=null!=(t=a[n])?t:r;if(!s)return null;if(l===n){let e=a[i];return e?{x:0,y:n<i?e.top+e.height-(s.top+s.height):e.top-s.top,...rw}:null}let o=function(e,t,n){let r=e[t],l=e[t-1],a=e[t+1];return r?n<t?l?r.top-(l.top+l.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):l?r.top-(l.top+l.height):0:0}(a,l,n);return l>n&&l<=i?{x:0,y:-s.height-o,...rw}:l<n&&l>=i?{x:0,y:s.height+o,...rw}:{x:0,y:0,...rw}},rN="Sortable",rC=h.default.createContext({activeIndex:-1,containerId:rN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ry,disabled:{draggable:!1,droppable:!1}});function rS(e){let{children:t,id:n,items:r,strategy:l=ry,disabled:a=!1}=e,{active:i,dragOverlay:s,droppableRects:o,over:d,measureDroppableContainers:c}=(0,h.useContext)(rs),u=t9(rN,n),m=null!==s.rect,p=(0,h.useMemo)(()=>r.map(e=>"object"==typeof e&&"id"in e?e.id:e),[r]),f=null!=i,x=i?p.indexOf(i.id):-1,g=d?p.indexOf(d.id):-1,v=(0,h.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,v.current),y=-1!==g&&-1===x||b,w="boolean"==typeof a?{draggable:a,droppable:a}:a;t2(()=>{b&&f&&c(p)},[b,p,f,c]),(0,h.useEffect)(()=>{v.current=p},[p]);let j=(0,h.useMemo)(()=>({activeIndex:x,containerId:u,disabled:w,disableTransforms:y,items:p,overIndex:g,useDragOverlay:m,sortedRects:p.reduce((e,t,n)=>{let r=o.get(t);return r&&(e[n]=r),e},Array(p.length)),strategy:l}),[x,u,w.draggable,w.droppable,y,p,g,o,m,l]);return h.default.createElement(rC.Provider,{value:j},t)}let rk=e=>{let{id:t,items:n,activeIndex:r,overIndex:l}=e;return rv(n,r,l).indexOf(t)},rD=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:l,items:a,newIndex:i,previousItems:s,previousContainerId:o,transition:d}=e;return!!d&&!!r&&(s===a||l!==i)&&(!!n||i!==l&&t===o)},rE={duration:200,easing:"ease"},rR="transform",rM=na.Transition.toString({property:rR,duration:0,easing:"linear"}),rI={roleDescription:"sortable"};function rT(e){var t,r,l,a;let{animateLayoutChanges:i=rD,attributes:s,disabled:o,data:d,getNewIndex:c=rk,id:u,strategy:m,resizeObserverConfig:p,transition:f=rE}=e,{items:x,containerId:g,activeIndex:v,disabled:b,disableTransforms:y,sortedRects:w,overIndex:j,useDragOverlay:N,strategy:C}=(0,h.useContext)(rC),S=(t=o,r=b,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(l=null==t?void 0:t.draggable)?l:r.draggable,droppable:null!=(a=null==t?void 0:t.droppable)?a:r.droppable}),k=x.indexOf(u),D=(0,h.useMemo)(()=>({sortable:{containerId:g,index:k,items:x},...d}),[g,d,k,x]),E=(0,h.useMemo)(()=>x.slice(x.indexOf(u)),[x,u]),{rect:R,node:M,isOver:I,setNodeRef:T}=function(e){let{data:t,disabled:r=!1,id:l,resizeObserverConfig:a}=e,i=t9("Droppable"),{active:s,dispatch:o,over:d,measureDroppableContainers:c}=(0,h.useContext)(ri),u=(0,h.useRef)({disabled:r}),m=(0,h.useRef)(!1),p=(0,h.useRef)(null),f=(0,h.useRef)(null),{disabled:x,updateMeasurementsFor:g,timeout:v}={...rf,...a},b=t5(null!=g?g:l),y=n4({callback:(0,h.useCallback)(()=>{if(!m.current){m.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),f.current=null},v)},[v]),disabled:x||!s}),[w,j]=t6((0,h.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),m.current=!1),e&&y.observe(e))},[y])),N=t5(t);return(0,h.useEffect)(()=>{y&&w.current&&(y.disconnect(),m.current=!1,y.observe(w.current))},[w,y]),(0,h.useEffect)(()=>(o({type:n.RegisterDroppable,element:{id:l,key:i,disabled:r,node:w,rect:p,data:N}}),()=>o({type:n.UnregisterDroppable,key:i,id:l})),[l]),(0,h.useEffect)(()=>{r!==u.current.disabled&&(o({type:n.SetDroppableDisabled,id:l,key:i,disabled:r}),u.current.disabled=r)},[l,i,r,o]),{active:s,rect:p,isOver:(null==d?void 0:d.id)===l,node:w,over:d,setNodeRef:j}}({id:u,data:D,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...p}}),{active:L,activatorEvent:P,activeNodeRect:O,attributes:F,setNodeRef:z,listeners:A,isDragging:B,over:U,setActivatorNodeRef:q,transform:H}=function(e){let{id:t,data:n,disabled:r=!1,attributes:l}=e,a=t9("Draggable"),{activators:i,activatorEvent:s,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:m}=(0,h.useContext)(ri),{role:p=rp,roleDescription:f="draggable",tabIndex:x=0}=null!=l?l:{},g=(null==o?void 0:o.id)===t,v=(0,h.useContext)(g?ru:rh),[b,y]=t6(),[w,j]=t6(),N=(0,h.useMemo)(()=>i.reduce((e,n)=>{let{eventName:r,handler:l}=n;return e[r]=e=>{l(e,t)},e},{}),[i,t]),C=t5(n);return t2(()=>(u.set(t,{id:t,key:a,node:b,activatorNode:w,data:C}),()=>{let e=u.get(t);e&&e.key===a&&u.delete(t)}),[u,t]),{active:o,activatorEvent:s,activeNodeRect:d,attributes:(0,h.useMemo)(()=>({role:p,tabIndex:x,"aria-disabled":r,"aria-pressed":!!g&&p===rp||void 0,"aria-roledescription":f,"aria-describedby":c.draggable}),[r,p,x,g,f,c.draggable]),isDragging:g,listeners:r?void 0:N,node:b,over:m,setNodeRef:y,setActivatorNodeRef:j,transform:v}}({id:u,data:D,attributes:{...rI,...s},disabled:S.draggable}),_=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,h.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(T,z),V=!!L,K=V&&!y&&rb(v)&&rb(j),W=!N&&B,X=W&&K?H:null,Y=K?null!=X?X:(null!=m?m:C)({rects:w,activeNodeRect:O,activeIndex:v,overIndex:j,index:k}):null,J=rb(v)&&rb(j)?c({id:u,items:x,activeIndex:v,overIndex:j}):k,G=null==L?void 0:L.id,$=(0,h.useRef)({activeId:G,items:x,newIndex:J,containerId:g}),Z=x!==$.current.items,Q=i({active:L,containerId:g,isDragging:B,isSorting:V,id:u,index:k,items:x,newIndex:$.current.newIndex,previousItems:$.current.items,previousContainerId:$.current.containerId,transition:f,wasDragging:null!=$.current.activeId}),ee=function(e){let{disabled:t,index:n,node:r,rect:l}=e,[a,i]=(0,h.useState)(null),s=(0,h.useRef)(n);return t2(()=>{if(!t&&n!==s.current&&r.current){let e=l.current;if(e){let t=nE(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&i(n)}}n!==s.current&&(s.current=n)},[t,n,r,l]),(0,h.useEffect)(()=>{a&&i(null)},[a]),a}({disabled:!Q,index:k,node:M,rect:R});return(0,h.useEffect)(()=>{V&&$.current.newIndex!==J&&($.current.newIndex=J),g!==$.current.containerId&&($.current.containerId=g),x!==$.current.items&&($.current.items=x)},[V,J,g,x]),(0,h.useEffect)(()=>{if(G===$.current.activeId)return;if(null!=G&&null==$.current.activeId){$.current.activeId=G;return}let e=setTimeout(()=>{$.current.activeId=G},50);return()=>clearTimeout(e)},[G]),{active:L,activeIndex:v,attributes:F,data:D,rect:R,index:k,newIndex:J,items:x,isOver:I,isSorting:V,isDragging:B,listeners:A,node:M,overIndex:j,over:U,setNodeRef:_,setActivatorNodeRef:q,setDroppableNodeRef:T,setDraggableNodeRef:z,transform:null!=ee?ee:Y,transition:ee||Z&&$.current.newIndex===k?rM:(!W||nr(P))&&f&&(V||Q)?na.Transition.toString({...f,property:rR}):void 0}}function rL(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let rP=[a.Down,a.Right,a.Up,a.Left],rO=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:l,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(rP.includes(e.code)){if(e.preventDefault(),!n||!r)return;let t=[];i.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;let i=l.get(n.id);if(i)switch(e.code){case a.Down:r.top<i.top&&t.push(n);break;case a.Up:r.top>i.top&&t.push(n);break;case a.Left:r.left>i.left&&t.push(n);break;case a.Right:r.left<i.left&&t.push(n)}});let d=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,l=ny(t),a=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=ny(r),i=Number((l.reduce((e,t,r)=>e+ng(n[r],t),0)/4).toFixed(4));a.push({id:t,data:{droppableContainer:e,value:i}})}}return a.sort(nv)})({active:n,collisionRect:r,droppableRects:l,droppableContainers:t,pointerCoordinates:null}),c=nw(d,"id");if(c===(null==s?void 0:s.id)&&d.length>1&&(c=d[1].id),null!=c){let e=i.get(n.id),t=i.get(c),a=t?l.get(t.id):null,s=null==t?void 0:t.node.current;if(s&&a&&e&&t){let n=nM(s).some((e,t)=>o[t]!==e),l=rF(e,t),i=function(e,t){return!!rL(e)&&!!rL(t)&&!!rF(e,t)&&e.data.current.sortable.index<t.data.current.sortable.index}(e,t),d=n||!l?{x:0,y:0}:{x:i?r.width-a.width:0,y:i?r.height-a.height:0},c={x:a.left,y:a.top};return d.x&&d.y?c:nn(c,d)}}}};function rF(e,t){return!!rL(e)&&!!rL(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}let rz=[{type:"text",label:"テキスト",icon:_},{type:"textarea",label:"テキストエリア",icon:N.FileText},{type:"select",label:"セレクト",icon:V},{type:"radio",label:"ラジオボタン",icon:K},{type:"checkbox",label:"チェックボックス",icon:W}];function rA(e){let{option:t,index:n,fieldId:r,onUpdate:l,onDelete:a}=e,{attributes:i,listeners:s,setNodeRef:o,transform:d,transition:c,isDragging:u}=rT({id:"option-".concat(r,"-").concat(n)}),h={transform:na.Transform.toString(d),transition:c,opacity:u?.5:1};return(0,m.jsxs)("div",{ref:o,style:h,className:"flex items-center space-x-2 p-2 bg-gray-50 rounded border",children:[(0,m.jsx)("div",{...i,...s,className:"cursor-grab",children:(0,m.jsx)(X,{className:"h-4 w-4 text-gray-400"})}),(0,m.jsx)(y.Input,{value:t,onChange:e=>l(r,n,e.target.value),className:"flex-1",placeholder:"オプション名"}),(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>a(r,n),className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors duration-200",children:(0,m.jsx)(E.Trash2,{className:"h-4 w-4"})})]})}function rB(e){var t,n,r,l,a,i,s,o,d,c,u,p,f,x,g;let{field:v,index:w,isExpanded:N,isHighlighted:k,onUpdate:D,onDelete:R,onMove:I,onDuplicate:T,onToggleExpanded:L,fieldTypes:P,sensors:O,onOptionDragEnd:F,onOptionUpdate:z,onOptionDelete:A,totalFields:B}=e,U=(0,h.useRef)(null);(0,h.useEffect)(()=>{if(N&&U.current){let e=setTimeout(()=>{var e;null==(e=U.current)||e.focus()},300);return()=>clearTimeout(e)}},[N]);let{attributes:q,listeners:H,setNodeRef:V,transform:K,transition:W,isDragging:$}=rT({id:v.id}),Z={transform:na.Transform.toString(K),transition:W,opacity:$?.5:1},Q=P.find(e=>e.type===v.type),ee=(null==Q?void 0:Q.icon)||_;return(0,m.jsx)(tT.motion.div,{ref:V,style:Z,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},id:"field-".concat(v.id),className:"border rounded-lg transition-all duration-200 ".concat(k?"ring-2 ring-blue-500 shadow-lg":"shadow-sm"," ").concat($?"shadow-xl":""),children:(0,m.jsxs)(C.Card,{children:[(0,m.jsx)(C.CardHeader,{className:"pb-3",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,m.jsx)("div",{...q,...H,className:"cursor-grab",children:(0,m.jsx)(X,{className:"h-5 w-5 text-gray-400"})}),(0,m.jsx)(ee,{className:"h-5 w-5 text-gray-600"}),(0,m.jsxs)("div",{children:[(0,m.jsx)(C.CardTitle,{className:"text-base",children:v.label||"無題のフィールド"}),(0,m.jsxs)(C.CardDescription,{className:"text-sm flex items-center gap-2 flex-wrap",children:[(0,m.jsx)("span",{children:null==Q?void 0:Q.label}),v.required&&(0,m.jsx)(S.Badge,{variant:"secondary",className:"text-xs",children:"必須"}),(null==(t=v.validation)?void 0:t.type)&&(0,m.jsxs)(S.Badge,{variant:"outline",className:"text-xs",children:["email"===v.validation.type&&"メール","phone"===v.validation.type&&"電話","number"===v.validation.type&&"数値","text"===v.validation.type&&"テキスト"]}),((null==(n=v.validation)?void 0:n.minLength)||(null==(r=v.validation)?void 0:r.maxLength))&&(0,m.jsx)(S.Badge,{variant:"outline",className:"text-xs",children:v.validation.minLength&&v.validation.maxLength?"".concat(v.validation.minLength,"-").concat(v.validation.maxLength,"文字"):v.validation.minLength?"".concat(v.validation.minLength,"文字以上"):"".concat(v.validation.maxLength,"文字以下")}),(null==(l=v.validation)?void 0:l.pattern)&&(0,m.jsx)(S.Badge,{variant:"outline",className:"text-xs",children:"カスタム"})]})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>L(v.id),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:N?"折りたたむ":"展開"}),(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>I(v.id,"up"),disabled:0===w,className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,m.jsx)(Y,{className:"h-4 w-4"})}),(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>I(v.id,"down"),disabled:w===B-1,className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,m.jsx)(J,{className:"h-4 w-4"})}),(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>T(v.id),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:(0,m.jsx)(M,{className:"h-4 w-4"})}),(0,m.jsx)(b.Button,{variant:"ghost",size:"sm",onClick:()=>R(v.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-colors duration-200",children:(0,m.jsx)(E.Trash2,{className:"h-4 w-4"})})]})]})}),N&&(0,m.jsx)(C.CardContent,{className:"pt-0",children:(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"label-".concat(v.id),children:"ラベル"}),(0,m.jsx)(y.Input,{ref:U,id:"label-".concat(v.id),value:v.label,onChange:e=>D(v.id,{label:e.target.value}),placeholder:"フィールドラベル"})]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"placeholder-".concat(v.id),children:"プレースホルダー"}),(0,m.jsx)(y.Input,{id:"placeholder-".concat(v.id),value:v.placeholder||"",onChange:e=>D(v.id,{placeholder:e.target.value}),placeholder:"プレースホルダーテキスト"})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(ep,{id:"required-".concat(v.id),checked:v.required,onCheckedChange:e=>D(v.id,{required:e})}),(0,m.jsx)(G.Label,{htmlFor:"required-".concat(v.id),children:"必須項目"})]}),("text"===v.type||"textarea"===v.type)&&(0,m.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)(G.Label,{className:"text-sm font-semibold text-gray-900",children:"バリデーション設定"}),(0,m.jsx)(S.Badge,{variant:"outline",className:"text-xs",children:"オプション"})]}),"text"===v.type&&(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"validation-type-".concat(v.id),className:"text-sm text-gray-700",children:"バリデーションタイプ"}),(0,m.jsxs)(tC,{value:(null==(a=v.validation)?void 0:a.type)||"none",onValueChange:e=>{var t,n,r;let l={...v.validation,type:"none"===e?void 0:e};"email"===e?(null==(t=v.validation)?void 0:t.pattern)||(l.pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"):"phone"===e?(null==(n=v.validation)?void 0:n.pattern)||(l.pattern="^[0-9]{2,4}-[0-9]{2,4}-[0-9]{4}$"):"number"===e?(null==(r=v.validation)?void 0:r.pattern)||(l.pattern="^[0-9]+$"):("none"===e||"text"===e)&&(l.pattern=void 0),D(v.id,{validation:l})},children:[(0,m.jsx)(tk,{children:(0,m.jsx)(tS,{placeholder:"バリデーションタイプを選択"})}),(0,m.jsxs)(tD,{children:[(0,m.jsx)(tE,{value:"none",children:"なし"}),(0,m.jsx)(tE,{value:"email",children:"メールアドレス"}),(0,m.jsx)(tE,{value:"phone",children:"電話番号"}),(0,m.jsx)(tE,{value:"number",children:"数値"}),(0,m.jsx)(tE,{value:"text",children:"テキスト"})]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"min-length-".concat(v.id),className:"text-sm text-gray-700",children:"最小文字数"}),(0,m.jsx)(y.Input,{id:"min-length-".concat(v.id),type:"number",min:"0",value:(null==(i=v.validation)?void 0:i.minLength)||"",onChange:e=>{var t;let n=e.target.value?parseInt(e.target.value):void 0,r={...v.validation,minLength:n,type:"textarea"===v.type?"text":null==(t=v.validation)?void 0:t.type};D(v.id,{validation:r})},placeholder:"例: 3"})]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"max-length-".concat(v.id),className:"text-sm text-gray-700",children:"最大文字数"}),(0,m.jsx)(y.Input,{id:"max-length-".concat(v.id),type:"number",min:"1",value:(null==(s=v.validation)?void 0:s.maxLength)||"",onChange:e=>{var t;let n=e.target.value?parseInt(e.target.value):void 0,r={...v.validation,maxLength:n,type:"textarea"===v.type?"text":null==(t=v.validation)?void 0:t.type};D(v.id,{validation:r})},placeholder:"例: 100"})]})]}),"text"===v.type&&(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"pattern-".concat(v.id),className:"text-sm text-gray-700",children:"カスタムパターン（正規表現）"}),(0,m.jsx)(y.Input,{id:"pattern-".concat(v.id),value:(null==(o=v.validation)?void 0:o.pattern)||"",onChange:e=>{let t={...v.validation,pattern:e.target.value||void 0};D(v.id,{validation:t})},placeholder:(null==(d=v.validation)?void 0:d.type)==="email"?"例: ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$":(null==(c=v.validation)?void 0:c.type)==="phone"?"例: ^[0-9]{2,4}-[0-9]{2,4}-[0-9]{4}$":(null==(u=v.validation)?void 0:u.type)==="number"?"例: ^[0-9]+$":"例: ^[0-9]{3}-[0-9]{4}-[0-9]{4}$",className:"font-mono text-sm"}),(0,m.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,m.jsx)("p",{children:"正規表現を使用してカスタムバリデーションを設定できます"}),(null==(p=v.validation)?void 0:p.type)&&!(null==(f=v.validation)?void 0:f.pattern)&&(0,m.jsxs)("p",{className:"text-blue-600",children:["💡 ","email"===v.validation.type&&"メールアドレス形式のデフォルトパターンが自動設定されます","phone"===v.validation.type&&"電話番号形式のデフォルトパターンが自動設定されます","number"===v.validation.type&&"数値形式のデフォルトパターンが自動設定されます"]})]})]}),(0,m.jsxs)("div",{className:"text-xs text-gray-600 bg-blue-50 p-3 rounded border border-blue-200",children:[(0,m.jsx)("p",{className:"font-medium mb-1",children:"バリデーション設定の説明:"}),"text"===v.type?(0,m.jsxs)("ul",{className:"space-y-1",children:[(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"メールアドレス"}),": 有効なメールアドレス形式をチェック（デフォルトパターン自動設定）"]}),(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"電話番号"}),": 電話番号形式をチェック（デフォルトパターン自動設定）"]}),(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"数値"}),": 数値のみの入力をチェック（デフォルトパターン自動設定）"]}),(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"最小/最大文字数"}),": 入力文字数の制限を設定"]}),(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"カスタムパターン"}),": 正規表現で独自のバリデーションを設定（デフォルトパターンを上書き）"]})]}):(0,m.jsxs)("ul",{className:"space-y-1",children:[(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"最小/最大文字数"}),": 入力文字数の制限を設定"]}),(0,m.jsx)("li",{children:"• テキストエリアでは文字数制限のみ設定可能です"})]}),"text"===v.type&&(0,m.jsxs)("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[(0,m.jsx)("p",{className:"font-medium text-yellow-800",children:"💡 パターンの優先順位:"}),(0,m.jsx)("p",{className:"text-yellow-700",children:"1. カスタムパターンが入力されている場合 → カスタムパターンで検証"}),(0,m.jsx)("p",{className:"text-yellow-700",children:"2. カスタムパターンが未入力の場合 → デフォルトパターンで検証"})]})]})]}),("select"===v.type||"radio"===v.type||"checkbox"===v.type)&&(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{children:"オプション"}),(0,m.jsx)(rm,{sensors:O,collisionDetection:nN,onDragEnd:e=>F(e,v.id),children:(0,m.jsx)(rS,{items:(null==(x=v.options)?void 0:x.map((e,t)=>"option-".concat(v.id,"-").concat(t)))||[],strategy:rj,children:(0,m.jsx)("div",{className:"space-y-2 mt-2",children:null==(g=v.options)?void 0:g.map((e,t)=>(0,m.jsx)(rA,{option:e,index:t,fieldId:v.id,onUpdate:z,onDelete:A},"option-".concat(v.id,"-").concat(t)))})})}),(0,m.jsxs)(b.Button,{variant:"outline",size:"sm",onClick:()=>{let e=[...v.options||[],"新しいオプション"];D(v.id,{options:e})},className:"mt-2 hover:bg-gray-50 hover:border-gray-300 transition-colors duration-200",children:[(0,m.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),"オプションを追加"]})]}),(0,m.jsxs)("div",{className:"text-xs text-gray-600 bg-green-50 p-3 rounded border border-green-200",children:[(0,m.jsx)("p",{className:"font-medium mb-1 text-green-800",children:"💡 選択系フィールドについて:"}),(0,m.jsxs)("ul",{className:"space-y-1 text-green-700",children:[(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"ラジオボタン"}),": 複数の選択肢から1つを選択"]}),(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"チェックボックス"}),": 複数の選択肢から複数選択可能"]}),(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"セレクト"}),": ドロップダウンから1つを選択"]}),(0,m.jsx)("li",{children:"• バリデーション設定は不要です（選択肢から選ぶため）"})]})]})]})]})})]})})}let rU=(0,h.forwardRef)((e,t)=>{let{form:n,onAddField:r,onUpdateField:l,onDeleteField:a,onMoveField:i,onDuplicateField:s}=e,[o,d]=(0,h.useState)(!1),[c,u]=(0,h.useState)(null),{expandedFields:p,highlightedField:f,toggleFieldExpanded:x,moveOption:g,updateOption:v,deleteOption:y,expandField:w}=function(e,t,n,r,l,a){let[i,s]=(0,h.useState)(new Set),[o,d]=(0,h.useState)(null),c=(0,h.useCallback)(e=>{s(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),u=(0,h.useCallback)(e=>{s(t=>{let n=new Set(t);return n.add(e),n})},[]),m=(0,h.useCallback)(e=>t(e),[t]),p=(0,h.useCallback)((e,t)=>{n(e,t)},[n]),f=(0,h.useCallback)(e=>{r(e),s(t=>{let n=new Set(t);return n.delete(e),n})},[r]),x=(0,h.useCallback)((e,t)=>{l(e,t)},[l]),g=(0,h.useCallback)(e=>{a(e)},[a]),v=(0,h.useCallback)((t,n,r)=>{let l=null==e?void 0:e.fields.find(e=>e.id===t);if(!l||!l.options)return;let a=[...l.options],[i]=a.splice(n,1);a.splice(r,0,i),p(t,{options:a})},[e,p]),b=(0,h.useCallback)((t,n,r)=>{let l=null==e?void 0:e.fields.find(e=>e.id===t);if(!l||!l.options)return;let a=[...l.options];a[n]=r,p(t,{options:a})},[e,p]),y=(0,h.useCallback)((t,n)=>{let r=null==e?void 0:e.fields.find(e=>e.id===t);r&&r.options&&p(t,{options:r.options.filter((e,t)=>t!==n)})},[e,p]),w=(0,h.useCallback)(t=>{let n=null==e?void 0:e.fields.find(e=>e.id===t);n&&p(t,{options:[...n.options||[],"新しいオプション"]})},[e,p]);return{expandedFields:i,highlightedField:o,toggleFieldExpanded:c,setHighlightedField:d,addField:m,updateField:p,deleteField:f,moveField:x,duplicateField:g,moveOption:v,updateOption:b,deleteOption:y,addOption:w,expandField:u}}(n,r,l,a,i,s);(0,h.useEffect)(()=>{if(c){let e=document.getElementById("field-".concat(c));e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),u(null)}},[c]);let S=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,h.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(nf(nQ),nf(nY,{coordinateGetter:rO})),k=(e,t)=>{let{active:n,over:r}=e;if(r&&n.id!==r.id)g(t,parseInt(n.id.toString().split("-").pop()||"0"),parseInt(r.id.toString().split("-").pop()||"0"))},D=e=>{let t=null==n?void 0:n.fields.find(t=>t.id===e);if(!t||!n)return;let l=r({...t,label:"".concat(t.label," (コピー)"),order:n.fields.length});l&&(w(l),u(l))};return(0,m.jsxs)("div",{ref:t,className:"h-full flex flex-col",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold",children:"フィールド管理"}),(0,m.jsxs)(b.Button,{onClick:()=>d(!o),className:"bg-black text-white hover:bg-gray-800 transition-colors duration-200",children:[(0,m.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),"フィールドを追加"]})]}),(0,m.jsxs)("div",{className:"flex-1 overflow-auto p-4",children:[o&&(0,m.jsx)(tI.default,{children:(0,m.jsxs)(C.Card,{className:"mb-4",children:[(0,m.jsx)(C.CardHeader,{children:(0,m.jsx)(C.CardTitle,{className:"text-base",children:"フィールドタイプを選択"})}),(0,m.jsx)(C.CardContent,{children:(0,m.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:rz.map(e=>{let t=e.icon;return(0,m.jsxs)(b.Button,{variant:"outline",onClick:()=>(e=>{let t=r({type:e,label:"",placeholder:"",required:!1,order:(null==n?void 0:n.fields.length)||0,options:["select","radio","checkbox"].includes(e)?["オプション1","オプション2"]:void 0,validation:{type:void 0,minLength:void 0,maxLength:void 0,pattern:void 0,required:!1}});d(!1),t&&(w(t),u(t))})(e.type),className:"h-auto p-4 flex flex-col items-center space-y-2 hover:bg-gray-50 hover:border-gray-300 transition-colors duration-200",children:[(0,m.jsx)(t,{className:"h-6 w-6"}),(0,m.jsx)("span",{className:"text-sm",children:e.label})]},e.type)})})})]})}),(null==n?void 0:n.fields)&&n.fields.length>0?(0,m.jsx)(rm,{sensors:S,collisionDetection:nN,onDragEnd:e=>{let{active:t,over:r}=e;if(!r||t.id===r.id)return;let a=(null==n?void 0:n.fields.findIndex(e=>e.id===t.id))||0,i=(null==n?void 0:n.fields.findIndex(e=>e.id===r.id))||0;-1!==a&&-1!==i&&n&&rv(n.fields,a,i).forEach((e,t)=>{l(e.id,{order:t})})},children:(0,m.jsx)(rS,{items:n.fields.map(e=>e.id),strategy:rj,children:(0,m.jsx)("div",{className:"space-y-3",children:(0,m.jsx)(tX,{children:n.fields.sort((e,t)=>e.order-t.order).map((e,t)=>(0,m.jsx)(rB,{field:e,index:t,isExpanded:p.has(e.id),isHighlighted:f===e.id,onUpdate:l,onDelete:a,onMove:i,onDuplicate:D,onToggleExpanded:x,fieldTypes:rz,sensors:S,onOptionDragEnd:k,onOptionUpdate:v,onOptionDelete:y,totalFields:n.fields.length},e.id))})})})}):(0,m.jsxs)("div",{className:"text-center py-12",children:[(0,m.jsx)(N.FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"フィールドがありません"}),(0,m.jsx)("p",{className:"text-gray-500 mb-4",children:"フォームにフィールドを追加して開始してください"}),(0,m.jsxs)(b.Button,{onClick:()=>d(!0),className:"bg-black text-white hover:bg-gray-800 transition-colors duration-200",children:[(0,m.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),"最初のフィールドを追加"]})]})]})]})});function rq(e){var t;let{form:n}=e;return(0,m.jsxs)("div",{className:"p-4 sm:p-6 w-full max-w-full overflow-hidden",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"フォームプレビュー"}),(0,m.jsxs)("div",{className:"text-base text-muted-foreground",children:[n.fields.length,"個の項目"]})]}),(0,m.jsx)("div",{className:"bg-card border border-gray-200 rounded-lg p-4 sm:p-6",children:(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,m.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-card-foreground mb-2",children:n.name}),n.description&&(0,m.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:n.description})]}),(0,m.jsx)("div",{className:"form-container bg-white border border-gray-200 rounded-lg w-full",style:{margin:"0 auto",padding:"16px",fontFamily:"Arial, sans-serif",backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",boxShadow:"0 2px 4px -1px rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",minHeight:"150px"},children:(0,m.jsxs)("form",{children:[n.fields.map(e=>{var t,n,r;let l="preview-".concat(e.id);switch(e.type){case"text":return(0,m.jsxs)("div",{className:"field",children:[(0,m.jsxs)("label",{htmlFor:l,className:"text-foreground",children:[e.label,e.required&&(0,m.jsx)("span",{className:"required",children:" *"})]}),(0,m.jsx)("input",{type:"text",id:l,name:e.id,placeholder:e.placeholder||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-none bg-white"})]},e.id);case"textarea":return(0,m.jsxs)("div",{className:"field",children:[(0,m.jsxs)("label",{htmlFor:l,className:"text-foreground",children:[e.label,e.required&&(0,m.jsx)("span",{className:"required",children:" *"})]}),(0,m.jsx)("textarea",{id:l,name:e.id,placeholder:e.placeholder||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-none bg-white",rows:4})]},e.id);case"select":return(0,m.jsxs)("div",{className:"field",children:[(0,m.jsxs)("label",{htmlFor:l,className:"text-foreground",children:[e.label,e.required&&(0,m.jsx)("span",{className:"required",children:" *"})]}),(0,m.jsxs)("select",{id:l,name:e.id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-none bg-white",children:[(0,m.jsx)("option",{value:"",children:"選択してください"}),null==(t=e.options)?void 0:t.map(e=>(0,m.jsx)("option",{value:e,children:e},e))]})]},e.id);case"radio":return(0,m.jsxs)("div",{className:"field",children:[(0,m.jsxs)("label",{className:"text-foreground",children:[e.label,e.required&&(0,m.jsx)("span",{className:"required",children:" *"})]}),(0,m.jsx)("div",{className:"space-y-2 mt-2",children:null==(n=e.options)?void 0:n.map(t=>(0,m.jsxs)("label",{className:"flex items-center text-foreground",children:[(0,m.jsx)("input",{type:"radio",name:e.id,value:t,disabled:!0,className:"mr-2"}),(0,m.jsx)("span",{children:t})]},t))})]},e.id);case"checkbox":return(0,m.jsxs)("div",{className:"field",children:[(0,m.jsxs)("label",{className:"text-foreground",children:[e.label,e.required&&(0,m.jsx)("span",{className:"required",children:" *"})]}),(0,m.jsx)("div",{className:"space-y-2 mt-2",children:null==(r=e.options)?void 0:r.map(t=>(0,m.jsxs)("label",{className:"flex items-center text-foreground",children:[(0,m.jsx)("input",{type:"checkbox",name:e.id,value:t,disabled:!0,className:"mr-2"}),(0,m.jsx)("span",{children:t})]},t))})]},e.id);case"file":return(0,m.jsxs)("div",{className:"field",children:[(0,m.jsxs)("label",{htmlFor:l,className:"text-foreground",children:[e.label,e.required&&(0,m.jsx)("span",{className:"required",children:" *"})]}),(0,m.jsx)("input",{type:"file",id:l,name:e.id,multiple:e.multiple||!1,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-none bg-white"}),(0,m.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"ファイルを選択してください"})]},e.id);default:return null}}),(null==(t=n.settings.fileUpload)?void 0:t.enabled)&&(0,m.jsxs)("div",{className:"field",children:[(0,m.jsxs)("label",{className:"text-foreground",children:["添付ファイル",n.settings.fileUpload.maxFiles>1&&(0,m.jsxs)("span",{className:"text-sm text-muted-foreground ml-2",children:["(最大",n.settings.fileUpload.maxFiles,"ファイル、1ファイルあたり",n.settings.fileUpload.maxFileSize,"MBまで)"]})]}),(0,m.jsx)("input",{type:"file",name:"attachments",multiple:n.settings.fileUpload.maxFiles>1,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-none bg-white"}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["ファイルを選択してください",n.settings.fileUpload.maxFiles>1&&(0,m.jsxs)("span",{children:[" (最大",n.settings.fileUpload.maxFiles,"ファイル)"]}),(0,m.jsxs)("span",{children:[" (1ファイルあたり",n.settings.fileUpload.maxFileSize,"MBまで)"]})]})]}),(0,m.jsx)("button",{type:"submit",disabled:!0,className:"mt-6 bg-gray-400 text-white px-6 py-3 rounded-none cursor-not-allowed",children:"送信"})]})})]})}),(0,m.jsxs)("div",{className:"mt-6 sm:mt-8 w-full max-w-full overflow-hidden",children:[(0,m.jsx)("h4",{className:"text-sm sm:text-md font-semibold text-foreground mb-3 sm:mb-4",children:"埋め込みコード"}),(0,m.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[(0,m.jsx)("h5",{className:"text-xs sm:text-sm font-medium text-foreground",children:"コンパクト版（推奨）"}),(0,m.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded w-fit",children:"2行で実装"})]}),(0,m.jsx)("div",{className:"bg-gray-900 text-gray-100 rounded p-3 sm:p-4 overflow-x-auto",children:(0,m.jsx)("pre",{className:"text-xs sm:text-sm whitespace-pre-wrap break-words",children:(0,m.jsx)("code",{children:'<div id="inquiry-form-'.concat(n.id,'"></div>\n<script src="https://your-domain.com/forms/inquiry-form-').concat(n.id,'.js"></script>')})})}),(0,m.jsxs)("div",{className:"text-xs text-muted-foreground mt-2 space-y-1",children:[(0,m.jsxs)("p",{children:["• ",(0,m.jsx)("strong",{children:"divタグ"}),": フォームを表示したい場所に配置"]}),(0,m.jsxs)("p",{children:["• ",(0,m.jsx)("strong",{children:"scriptタグ"}),": divタグを探してフォームを自動生成"]}),(0,m.jsx)("p",{children:"• サーバにホストされたJavaScriptファイルを読み込みます。実装が隠蔽され、コード量が最小限です。"})]})]}),(0,m.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[(0,m.jsx)("h5",{className:"text-xs sm:text-sm font-medium text-foreground",children:"インライン版"}),(0,m.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded w-fit",children:"完全自己完結"})]}),(0,m.jsx)("div",{className:"bg-gray-900 text-gray-100 rounded p-3 sm:p-4 overflow-x-auto max-h-64 sm:max-h-96",children:(0,m.jsx)("pre",{className:"text-xs sm:text-sm whitespace-pre-wrap break-words",children:(0,m.jsx)("code",{children:"<!-- 問合せフォーム: ".concat(n.name,' -->\n<div id="ir-form-').concat(n.id,"-container\" class=\"ir-form-container\"></div>\n<script>\n(function(){\n  const f=document.createElement('form');\n  f.className='ir-form';\n  f.innerHTML=`").concat(n.fields.map(e=>{var t,r,l;let a="ir-form-".concat(n.id,"-field-").concat(e.id),i=e.required?"required":"";switch(e.type){case"text":return'<div class="ir-form-field"><label for="'.concat(a,'" class="ir-form-label">').concat(e.label).concat(e.required?" *":"",'</label><input type="text" id="').concat(a,'" name="').concat(e.id,'" class="ir-form-input" placeholder="').concat(e.placeholder||"",'" ').concat(i,"></div>");case"textarea":return'<div class="ir-form-field"><label for="'.concat(a,'" class="ir-form-label">').concat(e.label).concat(e.required?" *":"",'</label><textarea id="').concat(a,'" name="').concat(e.id,'" class="ir-form-textarea" placeholder="').concat(e.placeholder||"",'" ').concat(i,"></textarea></div>");case"select":return'<div class="ir-form-field"><label for="'.concat(a,'" class="ir-form-label">').concat(e.label).concat(e.required?" *":"",'</label><select id="').concat(a,'" name="').concat(e.id,'" class="ir-form-select" ').concat(i,'><option value="">選択してください</option>').concat(null==(t=e.options)?void 0:t.map(e=>'<option value="'.concat(e,'">').concat(e,"</option>")).join(""),"</select></div>");case"radio":return'<div class="ir-form-field"><fieldset class="ir-form-fieldset"><legend class="ir-form-legend">'.concat(e.label).concat(e.required?" *":"","</legend>").concat(null==(r=e.options)?void 0:r.map(t=>'<label class="ir-form-radio-label"><input type="radio" name="'.concat(e.id,'" value="').concat(t,'" class="ir-form-radio" ').concat(i,'><span class="ir-form-radio-text">').concat(t,"</span></label>")).join(""),"</fieldset></div>");case"checkbox":return'<div class="ir-form-field"><fieldset class="ir-form-fieldset"><legend class="ir-form-legend">'.concat(e.label).concat(e.required?" *":"","</legend>").concat(null==(l=e.options)?void 0:l.map(t=>'<label class="ir-form-checkbox-label"><input type="checkbox" name="'.concat(e.id,'" value="').concat(t,'" class="ir-form-checkbox"><span class="ir-form-checkbox-text">').concat(t,"</span></label>")).join(""),"</fieldset></div>");default:return""}}).join(""),'<button type="submit" class="ir-form-submit">送信</button>`;\n  f.addEventListener(\'submit\',async e=>{\n    e.preventDefault();\n    \n    // ドメイン設定のバリデーション\n    const allowedDomains = ').concat(JSON.stringify(n.settings.allowedDomains||[]),";\n    if (!allowedDomains || allowedDomains.length === 0 || allowedDomains.some(domain => !domain.trim())) {\n      alert('エラー: 許可ドメインが設定されていません。フォーム管理者にお問い合わせください。');\n      return;\n    }\n    \n    const d=new FormData(f);\n    const data={};\n    for(let[k,v]of d.entries())data[k]=v;\n    try{\n      const r=await fetch('/api/inquiries',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({formId:'").concat(n.id,"',responses:data,senderInfo:{name:data.name||'',email:data.email||'',phone:data.phone||''},allowedDomains:").concat(JSON.stringify(n.settings.allowedDomains||[]),"})});\n      if(r.ok){").concat(n.settings.completionUrl?"window.location.href='".concat(n.settings.completionUrl,"';"):'alert("送信完了しました。");','}else{alert("送信に失敗しました。");}\n    }catch(e){console.error(\'Error:\',e);alert("送信に失敗しました。");}\n  });\n  const container=document.getElementById(\'ir-form-').concat(n.id,'-container\');\n  if(container)container.appendChild(f);\n})();\n</script>\n<style>\n/* 名前空間ベースのCSS（衝突を防ぐため） */\n.ir-form-container {\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 20px;\n  font-family: Arial, sans-serif;\n}\n\n.ir-form {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.ir-form-field {\n  margin-bottom: 20px;\n}\n\n.ir-form-label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n}\n\n.ir-form-input,\n.ir-form-textarea,\n.ir-form-select {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\n.ir-form-input:focus,\n.ir-form-textarea:focus,\n.ir-form-select:focus {\n  outline: none;\n  border-color: #007bff;\n  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);\n}\n\n.ir-form-fieldset {\n  border: none;\n  padding: 0;\n  margin: 0;\n}\n\n.ir-form-legend {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n}\n\n.ir-form-radio-label,\n.ir-form-checkbox-label {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n  cursor: pointer;\n}\n\n.ir-form-radio,\n.ir-form-checkbox {\n  margin-right: 8px;\n}\n\n.ir-form-radio-text,\n.ir-form-checkbox-text {\n  font-size: 14px;\n}\n\n.ir-form-submit {\n  background-color: #007bff;\n  color: white;\n  padding: 12px 24px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  align-self: flex-start;\n}\n\n.ir-form-submit:hover {\n  background-color: #0056b3;\n}\n\n.ir-form-submit:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n}\n\n/* 必須項目のスタイル */\n.ir-form-label:has(+ .ir-form-input[required]),\n.ir-form-legend:has(+ * [required]) {\n  color: #dc3545;\n}\n\n.ir-form-label:has(+ .ir-form-input[required])::after,\n.ir-form-legend:has(+ * [required])::after {\n  content: " *";\n  color: #dc3545;\n}\n\n/* バリデーションエラーのスタイル */\n.ir-form-error {\n  border-color: #dc3545 !important;\n  box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.25) !important;\n}\n\n.ir-form-error:focus {\n  border-color: #dc3545 !important;\n  box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.25) !important;\n}\n\n.ir-form-error-message {\n  color: #dc3545;\n  font-size: 12px;\n  margin-top: 4px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.ir-form-error-message::before {\n  content: "⚠";\n  font-size: 14px;\n}\n\n/* 送信ボタンの状態 */\n.ir-form-submit:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n/* フォーカス時のアクセシビリティ向上 */\n.ir-form-input:focus,\n.ir-form-textarea:focus,\n.ir-form-select:focus {\n  outline: 2px solid #007bff;\n  outline-offset: 2px;\n}\n\n/* ラジオボタン・チェックボックスのアクセシビリティ */\n.ir-form-radio:focus,\n.ir-form-checkbox:focus {\n  outline: 2px solid #007bff;\n  outline-offset: 2px;\n}\n</style>')})})}),(0,m.jsxs)("div",{className:"text-xs text-muted-foreground mt-2 space-y-1",children:[(0,m.jsxs)("p",{children:["• ",(0,m.jsx)("strong",{children:"divタグ"}),": フォームを表示したい場所に配置"]}),(0,m.jsxs)("p",{children:["• ",(0,m.jsx)("strong",{children:"scriptタグ"}),": divタグを探してフォームを自動生成"]}),(0,m.jsx)("p",{children:"• 完全に自己完結したコードです。外部ファイルに依存しません。"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[(0,m.jsx)("h5",{className:"text-xs sm:text-sm font-medium text-foreground",children:"詳細版（開発・デバッグ用）"}),(0,m.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded w-fit",children:"読みやすい"})]}),(0,m.jsx)("div",{className:"bg-gray-900 text-gray-100 rounded p-3 sm:p-4 overflow-x-auto max-h-48 sm:max-h-96",children:(0,m.jsx)("pre",{className:"text-xs sm:text-sm whitespace-pre-wrap break-words",children:(0,m.jsx)("code",{children:"<!-- 問合せフォーム: ".concat(n.name,' -->\n<div id="inquiry-form-').concat(n.id,'">\n  <form id="inquiry-form-').concat(n.id,'-form">\n    ').concat(n.fields.map(e=>{var t,n,r;let l="field-".concat(e.id),a=e.required?"required":"";switch(e.type){case"text":return'    <div class="field">\n      <label for="'.concat(l,'">').concat(e.label).concat(e.required?" *":"",'</label>\n      <input type="text" id="').concat(l,'" name="').concat(e.id,'" placeholder="').concat(e.placeholder||"",'" ').concat(a,">\n    </div>");case"textarea":return'    <div class="field">\n      <label for="'.concat(l,'">').concat(e.label).concat(e.required?" *":"",'</label>\n      <textarea id="').concat(l,'" name="').concat(e.id,'" placeholder="').concat(e.placeholder||"",'" ').concat(a,"></textarea>\n    </div>");case"select":return'    <div class="field">\n      <label for="'.concat(l,'">').concat(e.label).concat(e.required?" *":"",'</label>\n      <select id="').concat(l,'" name="').concat(e.id,'" ').concat(a,'>\n        <option value="">選択してください</option>\n        ').concat(null==(t=e.options)?void 0:t.map(e=>'        <option value="'.concat(e,'">').concat(e,"</option>")).join("\n"),"\n      </select>\n    </div>");case"radio":return'    <div class="field">\n      <label>'.concat(e.label).concat(e.required?" *":"",'</label>\n      <div class="space-y-2 mt-2">\n        ').concat(null==(n=e.options)?void 0:n.map(t=>'\n        <label class="flex items-center">\n          <input type="radio" name="'.concat(e.id,'" value="').concat(t,'" ').concat(a,' class="mr-2">\n          <span>').concat(t,"</span>\n        </label>")).join(""),"\n      </div>\n    </div>");case"checkbox":return'    <div class="field">\n      <label>'.concat(e.label).concat(e.required?" *":"",'</label>\n      <div class="space-y-2 mt-2">\n        ').concat(null==(r=e.options)?void 0:r.map(t=>'\n        <label class="flex items-center">\n          <input type="checkbox" name="'.concat(e.id,'" value="').concat(t,'" class="mr-2">\n          <span>').concat(t,"</span>\n        </label>")).join(""),"\n      </div>\n    </div>");default:return""}}).join("\n"),'\n    <button type="submit">送信</button>\n  </form>\n</div>\n\n<style>\n').concat(n.styling.css,"\n</style>\n\n<script>\n(function() {\n  const form = document.getElementById('inquiry-form-").concat(n.id,"-form');\n  if (!form) return;\n\n  form.addEventListener('submit', async function(e) {\n    e.preventDefault();\n    \n    const formData = new FormData(form);\n    const data = {};\n    for (let [key, value] of formData.entries()) {\n      data[key] = value;\n    }\n\n    try {\n      const response = await fetch('/api/inquiries', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          formId: '").concat(n.id,"',\n          responses: data,\n          senderInfo: {\n            name: data.name || '',\n            email: data.email || '',\n            phone: data.phone || ''\n          }\n        })\n      });\n\n      if (response.ok) {\n        ").concat(n.settings.completionUrl?"        window.location.href = '".concat(n.settings.completionUrl,"';"):'        alert("送信完了しました。");','\n      } else {\n        alert("送信に失敗しました。");\n      }\n    } catch (error) {\n      console.error(\'Error:\', error);\n      alert("送信に失敗しました。");\n    }\n  });\n})();\n</script>')})})}),(0,m.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"開発やデバッグ時に読みやすい形式です。本番環境では推奨されません。"})]})]})]})}function rH(e){var t,n,r,l,a;let{form:i,settings:s,signatures:o,onFormChange:d,onSettingsChange:c}=e,u=e=>{c({...s,allowedDomains:e})},h=e=>{c({...s,recipientEmails:e})},p=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return(0,m.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"フォーム設定"}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsx)("div",{className:"space-y-4",children:(0,m.jsx)("div",{className:"rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200",children:(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"formName",className:"text-base font-semibold text-gray-900",children:"フォーム名称"}),(0,m.jsx)(y.Input,{id:"formName",value:i.name,onChange:e=>{d({name:e.target.value})},placeholder:"フォームの名称を入力してください",className:"text-base"}),(0,m.jsx)("p",{className:"text-xs text-gray-500",children:"フォームの識別に使用される名称です"})]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"formDescription",className:"text-base font-semibold text-gray-900",children:"フォーム説明"}),(0,m.jsx)(y.Input,{id:"formDescription",value:i.description||"",onChange:e=>{d({description:e.target.value})},placeholder:"フォームの説明を入力してください（任意）",className:"text-base"}),(0,m.jsx)("p",{className:"text-xs text-gray-500",children:"フォームの用途や内容を説明します（任意項目）"})]})]})})}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex flex-row items-center justify-between rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200",children:[(0,m.jsxs)("div",{className:"space-y-2 flex-1 pr-4",children:[(0,m.jsx)(G.Label,{htmlFor:"fileUpload",className:"text-base font-semibold cursor-pointer text-gray-900",children:"添付ファイル"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"このフォームで添付ファイルの送信を許可します"})]}),(0,m.jsx)("div",{className:"flex-shrink-0",children:(0,m.jsx)(ep,{id:"fileUpload",checked:(null==(t=s.fileUpload)?void 0:t.enabled)||!1,onCheckedChange:e=>{let t=s.fileUpload||{enabled:!1,maxFiles:1,maxFileSize:10};c({...s,fileUpload:{...t,enabled:e}})}})})]}),(null==(n=s.fileUpload)?void 0:n.enabled)&&(0,m.jsx)("div",{className:"space-y-6 pl-8 border-l-2 border-black bg-gray-50/50 p-4 sm:p-6 rounded-r-xl",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"maxFiles",className:"text-sm font-semibold text-gray-900",children:"最大ファイル数"}),(0,m.jsx)(y.Input,{id:"maxFiles",type:"number",min:"1",max:"5",value:(null==(r=s.fileUpload)?void 0:r.maxFiles)||1,onChange:e=>(e=>{let t=Math.min(5,Math.max(1,e));c({...s,fileUpload:{...s.fileUpload,maxFiles:t}})})(parseInt(e.target.value)||1),className:"w-full"}),(0,m.jsx)("p",{className:"text-xs text-gray-600",children:"1回の送信でアップロードできる最大ファイル数（最大5ファイル）"})]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(G.Label,{htmlFor:"maxFileSize",className:"text-sm font-semibold text-gray-900",children:"最大ファイルサイズ（MB）"}),(0,m.jsx)(y.Input,{id:"maxFileSize",type:"number",min:"1",max:"20",value:(null==(l=s.fileUpload)?void 0:l.maxFileSize)||10,onChange:e=>(e=>{let t=Math.min(20,Math.max(1,e));c({...s,fileUpload:{...s.fileUpload,maxFileSize:t}})})(parseInt(e.target.value)||10),className:"w-full"}),(0,m.jsx)("p",{className:"text-xs text-gray-600",children:"1ファイルあたりの最大サイズ（最大20MB）"})]})]})})]}),(0,m.jsxs)("div",{className:"flex flex-row items-center justify-between rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200",children:[(0,m.jsxs)("div",{className:"space-y-2 flex-1 pr-4",children:[(0,m.jsx)(G.Label,{htmlFor:"autoReply",className:"text-base font-semibold cursor-pointer text-gray-900",children:"自動返信"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"フォーム送信時に自動返信メールを送信します"})]}),(0,m.jsx)("div",{className:"flex-shrink-0",children:(0,m.jsx)(ep,{id:"autoReply",checked:s.autoReply,onCheckedChange:e=>{c({...s,autoReply:e})}})})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)("div",{className:"flex flex-row items-center justify-between rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200",children:(0,m.jsxs)("div",{className:"space-y-2 flex-1 pr-4",children:[(0,m.jsx)(G.Label,{htmlFor:"allowedDomains",className:"text-base font-semibold cursor-pointer text-gray-900",children:"許可ドメイン設定"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"問合せ受付を許可するドメインを指定します（CORS設定用）"})]})}),(0,m.jsx)("div",{className:"space-y-4 pl-8 border-l-2 border-blue-200 bg-blue-50/30 p-4 sm:p-6 rounded-r-xl",children:(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)(G.Label,{className:"text-sm font-semibold text-gray-900",children:"許可ドメイン一覧"}),(0,m.jsx)("p",{className:"text-xs text-gray-600",children:"例: example.com, subdomain.example.com, localhost:3000"}),(0,m.jsxs)("div",{className:"space-y-2",children:[(s.allowedDomains||["localhost:3000"]).map((e,t)=>(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(y.Input,{type:"text",value:e,onChange:e=>((e,t)=>{let n=[...s.allowedDomains||[]];n[e]=t,u(n)})(t,e.target.value),placeholder:"example.com",className:"flex-1 ".concat(e.trim()?"":"border-red-300 focus:border-red-500")}),(0,m.jsx)(b.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>(e=>{let t=s.allowedDomains||[];if(t.length<=1)return;let n=[...t];n.splice(e,1),u(n)})(t),disabled:(s.allowedDomains||[]).length<=1,className:"text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors duration-200 ".concat((s.allowedDomains||[]).length<=1?"opacity-50 cursor-not-allowed":""),children:"削除"})]},t)),(0,m.jsx)(b.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=s.allowedDomains||[];e.some(e=>!e.trim())||u([...e,""])},disabled:(s.allowedDomains||[]).some(e=>!e.trim()),className:"w-full border-dashed border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-colors duration-200 ".concat((s.allowedDomains||[]).some(e=>!e.trim())?"opacity-50 cursor-not-allowed":""),children:"+ ドメインを追加"})]}),(!s.allowedDomains||0===s.allowedDomains.length||s.allowedDomains.some(e=>!e.trim()))&&(0,m.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,m.jsx)("div",{className:"text-red-600 text-sm",children:"❌"}),(0,m.jsxs)("div",{className:"text-xs text-red-800",children:[(0,m.jsx)("p",{className:"font-medium mb-1",children:"必須設定エラー:"}),(0,m.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,m.jsx)("li",{children:"• 最低1つ以上のドメインを登録してください"}),(0,m.jsx)("li",{children:"• 空のドメインは登録できません"})]})]})]})}),(0,m.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,m.jsx)("div",{className:"text-yellow-600 text-sm",children:"⚠️"}),(0,m.jsxs)("div",{className:"text-xs text-yellow-800",children:[(0,m.jsx)("p",{className:"font-medium mb-1",children:"設定時の注意事項:"}),(0,m.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"最低1つ以上のドメイン登録が必須です"})]}),(0,m.jsx)("li",{children:"• プロトコル（http://, https://）は不要です"}),(0,m.jsx)("li",{children:"• ポート番号を含める場合は「:」で区切ってください"}),(0,m.jsx)("li",{children:"• ワイルドカード（*）は使用できません"}),(0,m.jsx)("li",{children:"• 開発環境では「localhost:3000」などを追加してください"})]})]})]})})]})})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)("div",{className:"flex flex-row items-center justify-between rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200",children:(0,m.jsxs)("div",{className:"space-y-2 flex-1 pr-4",children:[(0,m.jsx)(G.Label,{htmlFor:"recipientEmails",className:"text-base font-semibold cursor-pointer text-gray-900",children:"送信先メールアドレス"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"問合せフォームの送信先メールアドレスを指定します"})]})}),(0,m.jsx)("div",{className:"space-y-4 pl-8 border-l-2 border-green-200 bg-green-50/30 p-4 sm:p-6 rounded-r-xl",children:(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)(G.Label,{className:"text-sm font-semibold text-gray-900",children:"送信先メールアドレス一覧"}),(0,m.jsx)("p",{className:"text-xs text-gray-600",children:"例: admin@example.com, support@example.com"}),(0,m.jsxs)("div",{className:"space-y-2",children:[(s.recipientEmails||["admin@example.com"]).map((e,t)=>(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(y.Input,{type:"email",value:e,onChange:e=>((e,t)=>{let n=[...s.recipientEmails||[]];n[e]=t,h(n)})(t,e.target.value),placeholder:"example@domain.com",className:"flex-1 ".concat(e.trim()&&p(e)?"":"border-red-300 focus:border-red-500")}),(0,m.jsx)(b.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>(e=>{let t=s.recipientEmails||[];if(t.length<=1)return;let n=[...t];n.splice(e,1),h(n)})(t),disabled:(s.recipientEmails||[]).length<=1,className:"text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors duration-200 ".concat((s.recipientEmails||[]).length<=1?"opacity-50 cursor-not-allowed":""),children:"削除"})]},t)),(0,m.jsx)(b.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=s.recipientEmails||[];e.some(e=>!e.trim())||e.length>=10||h([...e,""])},disabled:(s.recipientEmails||[]).some(e=>!e.trim()||!p(e))||(s.recipientEmails||[]).length>=10,className:"w-full border-dashed border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-colors duration-200 ".concat((s.recipientEmails||[]).some(e=>!e.trim()||!p(e))||(s.recipientEmails||[]).length>=10?"opacity-50 cursor-not-allowed":""),children:"+ メールアドレスを追加"})]}),(!s.recipientEmails||0===s.recipientEmails.length||s.recipientEmails.some(e=>!e.trim()||!p(e)))&&(0,m.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,m.jsx)("div",{className:"text-red-600 text-sm",children:"❌"}),(0,m.jsxs)("div",{className:"text-xs text-red-800",children:[(0,m.jsx)("p",{className:"font-medium mb-1",children:"必須設定エラー:"}),(0,m.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,m.jsx)("li",{children:"• 最低1つ以上のメールアドレスを登録してください"}),(0,m.jsx)("li",{children:"• 有効なメールアドレス形式で入力してください"}),(0,m.jsx)("li",{children:"• 空のメールアドレスは登録できません"})]})]})]})}),(0,m.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,m.jsx)("div",{className:"text-blue-600 text-sm",children:"ℹ️"}),(0,m.jsxs)("div",{className:"text-xs text-blue-800",children:[(0,m.jsx)("p",{className:"font-medium mb-1",children:"設定時の注意事項:"}),(0,m.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,m.jsxs)("li",{children:["• ",(0,m.jsx)("strong",{children:"最低1つ以上のメールアドレス登録が必須です"})]}),(0,m.jsx)("li",{children:"• 最大10個までメールアドレスを登録できます"}),(0,m.jsx)("li",{children:"• 有効なメールアドレス形式で入力してください"}),(0,m.jsx)("li",{children:"• 複数のメールアドレスには、すべてのアドレスに問合せが送信されます"}),(0,m.jsx)("li",{children:"• メールアドレスは「@」を含む完全な形式で入力してください"})]})]})]})})]})})]}),(0,m.jsx)("div",{className:"rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200",children:(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)(G.Label,{className:"text-base font-medium text-gray-700",children:"完了ページURL"}),(0,m.jsx)(y.Input,{type:"url",value:s.completionUrl,onChange:e=>{var t;return t=e.target.value,void c({...s,completionUrl:t})},placeholder:"https://example.com/thank-you",className:"h-10"}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:"フォーム送信完了後にリダイレクトするURLを指定してください。空の場合はアラートで完了を通知します。"})]})}),(0,m.jsx)("div",{className:"rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200",children:(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)(G.Label,{className:"text-base font-medium text-gray-700",children:"送信控えメールの署名"}),(0,m.jsxs)(tC,{value:s.signatureId||void 0,onValueChange:e=>{var t;return t=e||"",void c({...s,signatureId:t})},children:[(0,m.jsx)(tk,{className:"w-full",children:(0,m.jsx)(tS,{placeholder:"署名を選択してください"})}),(0,m.jsx)(tD,{children:o.map(e=>(0,m.jsx)(tE,{value:e.id,children:e.name},e.id))})]}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:"送信控えメールに使用する署名を選択してください。"})]})}),s.signatureId&&(0,m.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,m.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"署名プレビュー"}),(0,m.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:null==(a=o.find(e=>e.id===s.signatureId))?void 0:a.content})]}),(0,m.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,m.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"📧 送信控えメールについて"}),(0,m.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,m.jsx)("li",{children:"• 送信控えメールには、フォームの回答内容と選択された署名が含まれます"}),(0,m.jsx)("li",{children:"• 送信者のメールアドレスが正しく入力されている必要があります"}),(0,m.jsx)("li",{children:"• 署名は事前に「署名管理」で登録されたものから選択できます"}),(0,m.jsx)("li",{children:"• 完了ページURLが設定されている場合、送信完了後にそのページにリダイレクトされます"})]})]})]})]})}rU.displayName="FieldEditor";var r_=e.i(77572);let rV=(0,h.forwardRef)((e,t)=>{let{form:n,onSave:r,onCancel:l,mode:a="edit"}=e,{currentForm:i,updateForm:s,addField:o,updateField:d,deleteField:c,moveField:u,duplicateField:p,isDirty:x,isValid:g,saveForm:y,resetForm:w}=function(e,t){let[n,r]=(0,h.useState)(e),[l,a]=(0,h.useState)(!1);(0,h.useEffect)(()=>{r(e),a(!1)},[e]);let i=(0,h.useCallback)(e=>{r(t=>t?{...t,...e}:null),a(!0)},[]),s=(0,h.useCallback)(e=>{if(!n)return;let t={...e,id:v(),order:n.fields.length};return r(e=>e?{...e,fields:[...e.fields,t]}:null),a(!0),t.id},[n]),o=(0,h.useCallback)((e,t)=>{n&&(r(n=>n?{...n,fields:n.fields.map(n=>n.id===e?{...n,...t}:n)}:null),a(!0))},[n]),d=(0,h.useCallback)(e=>{n&&(r(t=>t?{...t,fields:t.fields.filter(t=>t.id!==e)}:null),a(!0))},[n]),c=(0,h.useCallback)((e,t)=>{if(!n)return;let l=[...n.fields],i=l.findIndex(t=>t.id===e);if(-1===i)return;let s="up"===t?i-1:i+1;s<0||s>=l.length||([l[i],l[s]]=[l[s],l[i]],r(e=>e?{...e,fields:l.map((e,t)=>({...e,order:t}))}:null),a(!0))},[n]),u=(0,h.useCallback)(e=>{if(!n)return;let t=n.fields.find(t=>t.id===e);if(!t)return;let l={...t,id:v(),label:"".concat(t.label," (コピー)"),order:n.fields.length};r(e=>e?{...e,fields:[...e.fields,l]}:null),a(!0)},[n]),m=(0,h.useCallback)(async()=>{n&&(t({...n,updatedAt:new Date().toISOString()}),a(!1))},[n,t]),p=(0,h.useCallback)(()=>{r(e),a(!1)},[e]),f=(null==n?void 0:n.name)&&n.fields.length>0;return{currentForm:n,updateForm:i,addField:s,updateField:o,deleteField:d,moveField:c,duplicateField:u,isDirty:l,isValid:f,saveForm:m,resetForm:p}}(n,r),[j,N]=(0,h.useState)("settings"),[C,S]=(0,h.useState)([]);(0,h.useEffect)(()=>{(()=>{try{let e=f.signatures();e&&e.length>0?S(e):S([{id:"default",name:"デフォルト署名",content:"お問い合わせありがとうございます。\n\n担当者より改めてご連絡いたします。\n\nよろしくお願いいたします。",isDefault:!0,createdAt:new Date().toISOString()}])}catch(e){console.error("署名データの読み込みに失敗しました:",e),S([{id:"default",name:"デフォルト署名",content:"お問い合わせありがとうございます。\n\n担当者より改めてご連絡いたします。\n\nよろしくお願いいたします。",isDefault:!0,createdAt:new Date().toISOString()}])}})()},[]);let k=(0,h.useCallback)(async()=>{g&&await y()},[g,y]),D=(0,h.useCallback)(()=>{x?confirm("変更が保存されていません。本当にキャンセルしますか？")&&(w(),l()):l()},[x,w,l]);return(0,m.jsxs)("div",{ref:t,className:"h-full flex flex-col",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold",children:"create"===a?"新しいフォームを作成":"フォームを編集"}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(b.Button,{variant:"outline",onClick:D,className:"hover:bg-gray-50 hover:border-gray-300 transition-colors duration-200",children:"キャンセル"}),(0,m.jsx)(b.Button,{variant:"default",onClick:k,disabled:!g,className:"bg-black text-white hover:bg-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"保存"})]})]}),(0,m.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,m.jsxs)(r_.Tabs,{value:j,onValueChange:N,className:"h-full",children:[(0,m.jsxs)(r_.TabsList,{className:"grid w-full grid-cols-3",children:[(0,m.jsx)(r_.TabsTrigger,{value:"settings",className:"hover:bg-gray-100 transition-colors duration-200 data-[state=active]:bg-black data-[state=active]:text-white",children:"設定"}),(0,m.jsx)(r_.TabsTrigger,{value:"fields",className:"hover:bg-gray-100 transition-colors duration-200 data-[state=active]:bg-black data-[state=active]:text-white",children:"フィールド"}),(0,m.jsx)(r_.TabsTrigger,{value:"preview",className:"hover:bg-gray-100 transition-colors duration-200 data-[state=active]:bg-black data-[state=active]:text-white",children:"プレビュー"})]}),(0,m.jsx)(r_.TabsContent,{value:"settings",className:"h-full",children:i&&(0,m.jsx)(rH,{form:i,settings:i.settings,signatures:C,onFormChange:e=>s(e),onSettingsChange:e=>s({settings:e})})}),(0,m.jsx)(r_.TabsContent,{value:"fields",className:"h-full",children:(0,m.jsx)(rU,{form:i,onAddField:o,onUpdateField:d,onDeleteField:c,onMoveField:u,onDuplicateField:p})}),(0,m.jsx)(r_.TabsContent,{value:"preview",className:"h-full overflow-auto",children:i&&(0,m.jsx)(rq,{form:i})})]})})]})});function rK(e){return(0,m.jsx)(rV,{...e})}rV.displayName="FormEditor";var rW=e.i(2971),rX=e.i(22468),rY=e.i(30909);function rJ(){let[e,t]=(0,h.useState)([]),[n,r]=(0,h.useState)(null),[l,a]=(0,h.useState)(!1),[i,s]=(0,h.useState)(!1);(0,h.useEffect)(()=>{if(0===f.signatures().length){let e=[{id:"1",name:"デフォルト署名",content:"お問い合わせありがとうございます。\n\n担当者より改めてご連絡いたします。\n\nよろしくお願いいたします。",isDefault:!0,createdAt:new Date().toISOString()},{id:"2",name:"営業部署名",content:"この度はお問い合わせいただき、誠にありがとうございます。\n\n営業部の担当者より、詳細についてご連絡いたします。\n\n何かご不明な点がございましたら、お気軽にお問い合わせください。\n\n営業部",isDefault:!1,createdAt:new Date().toISOString()}];x.signatures(e)}let e=f.settings();if(!e.defaultSignature){let t=f.signatures().find(e=>e.isDefault);t&&(e.defaultSignature=t.id,x.settings(e))}t(f.forms())},[]);let o=()=>{r({id:v(),name:"新しいフォーム",description:"",fields:[],styling:{css:'\n/* 名前空間ベースのCSS（衝突を防ぐため） */\n.ir-form-container {\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 20px;\n  font-family: Arial, sans-serif;\n}\n\n.ir-form {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.ir-form-field {\n  margin-bottom: 20px;\n}\n\n.ir-form-label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n}\n\n.ir-form-input,\n.ir-form-textarea,\n.ir-form-select {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\n.ir-form-input:focus,\n.ir-form-textarea:focus,\n.ir-form-select:focus {\n  outline: none;\n  border-color: #007bff;\n  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);\n}\n\n.ir-form-fieldset {\n  border: none;\n  padding: 0;\n  margin: 0;\n}\n\n.ir-form-legend {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #333;\n}\n\n.ir-form-radio-label,\n.ir-form-checkbox-label {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n  cursor: pointer;\n}\n\n.ir-form-radio,\n.ir-form-checkbox {\n  margin-right: 8px;\n}\n\n.ir-form-radio-text,\n.ir-form-checkbox-text {\n  font-size: 14px;\n}\n\n.ir-form-submit {\n  background-color: #007bff;\n  color: white;\n  padding: 12px 24px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  align-self: flex-start;\n}\n\n.ir-form-submit:hover {\n  background-color: #0056b3;\n}\n\n.ir-form-submit:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n}\n\n/* 必須項目のスタイル */\n.ir-form-label:has(+ .ir-form-input[required]),\n.ir-form-legend:has(+ * [required]) {\n  color: #dc3545;\n}\n\n.ir-form-label:has(+ .ir-form-input[required])::after,\n.ir-form-legend:has(+ * [required])::after {\n  content: " *";\n  color: #dc3545;\n}\n\n/* バリデーションエラーのスタイル */\n.ir-form-error {\n  border-color: #dc3545 !important;\n  box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.25) !important;\n}\n\n.ir-form-error:focus {\n  border-color: #dc3545 !important;\n  box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.25) !important;\n}\n\n.ir-form-error-message {\n  color: #dc3545;\n  font-size: 12px;\n  margin-top: 4px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.ir-form-error-message::before {\n  content: "⚠";\n  font-size: 14px;\n}\n\n/* 送信ボタンの状態 */\n.ir-form-submit:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n/* フォーカス時のアクセシビリティ向上 */\n.ir-form-input:focus,\n.ir-form-textarea:focus,\n.ir-form-select:focus {\n  outline: 2px solid #007bff;\n  outline-offset: 2px;\n}\n\n/* ラジオボタン・チェックボックスのアクセシビリティ */\n.ir-form-radio:focus,\n.ir-form-checkbox:focus {\n  outline: 2px solid #007bff;\n  outline-offset: 2px;\n}\n        ',theme:"default"},settings:{completionUrl:"",signatureId:"",autoReply:!0,fileUpload:{enabled:!1,maxFiles:1,maxFileSize:10},allowedDomains:["localhost:3000"]},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),a(!0)};return(0,m.jsxs)(rY.SidebarProvider,{children:[(0,m.jsx)(rX.AppSidebar,{}),(0,m.jsxs)(rY.SidebarInset,{children:[(0,m.jsx)(rW.default,{currentPage:"forms"}),(0,m.jsx)("main",{className:"flex-1 p-4 sm:p-6",children:l||i?(0,m.jsx)(rK,{form:n,onSave:n=>{let l=n.settings.allowedDomains||[];if(0===l.length||l.some(e=>!e.trim()))return void alert("エラー: 最低1つ以上の有効なドメインを登録してください。");let i=e.find(e=>e.id===n.id)?e.map(e=>e.id===n.id?{...n,updatedAt:new Date().toISOString()}:e):[...e,{...n,updatedAt:new Date().toISOString()}];t(i),x.forms(i),a(!1),r(null)},onCancel:()=>{a(!1),s(!1),r(null)}}):(0,m.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,m.jsx)(tI.default,{children:(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 leading-tight",children:"フォーム管理"}),(0,m.jsx)("p",{className:"text-gray-600 mt-2 text-xs sm:text-sm",children:"問合せフォームの作成・編集・管理を行います"})]}),(0,m.jsxs)(b.Button,{onClick:o,size:"lg",className:"bg-black hover:bg-gray-800 text-white shadow-sm w-full sm:w-auto",children:[(0,m.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"新しいフォームを作成"}),(0,m.jsx)("span",{className:"sm:hidden",children:"フォーム作成"})]})]})}),(0,m.jsx)(tI.default,{delay:.2,children:(0,m.jsx)(H,{forms:e,onCreateForm:o,onEditForm:e=>{r(e),a(!0),s(!1)},onDeleteForm:n=>{let r=e.filter(e=>e.id!==n);t(r),x.forms(r)},onPreviewForm:e=>{r(e),s(!0),a(!1)},onDuplicateForm:e=>{r({...e,id:v(),name:"".concat(e.name," (コピー)"),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),a(!0),s(!1)}})})]})})]})]})}}]);