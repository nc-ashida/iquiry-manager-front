(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";e.s(["Trash2",()=>t],27612);let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},68499,e=>{"use strict";e.s(["AlertDialog",()=>R,"AlertDialogAction",()=>V,"AlertDialogCancel",()=>L,"AlertDialogContent",()=>E,"AlertDialogDescription",()=>I,"AlertDialogFooter",()=>M,"AlertDialogHeader",()=>F,"AlertDialogTitle",()=>H,"AlertDialogTrigger",()=>P],68499);var t=e.i(43476),a=e.i(71645),r=e.i(30030),s=e.i(20783),l=e.i(26999),i=e.i(81140),n=e.i(91918),o="AlertDialog",[d,c]=(0,r.createContextScope)(o,[l.createDialogScope]),g=(0,l.createDialogScope)(),u=e=>{let{__scopeAlertDialog:a,...r}=e,s=g(a);return(0,t.jsx)(l.Root,{...s,...r,modal:!0})};u.displayName=o;var x=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=g(r);return(0,t.jsx)(l.Trigger,{...i,...s,ref:a})});x.displayName="AlertDialogTrigger";var m=e=>{let{__scopeAlertDialog:a,...r}=e,s=g(a);return(0,t.jsx)(l.Portal,{...s,...r})};m.displayName="AlertDialogPortal";var h=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=g(r);return(0,t.jsx)(l.Overlay,{...i,...s,ref:a})});h.displayName="AlertDialogOverlay";var f="AlertDialogContent",[p,y]=d(f),j=(0,n.createSlottable)("AlertDialogContent"),b=a.forwardRef((e,r)=>{let{__scopeAlertDialog:n,children:o,...d}=e,c=g(n),u=a.useRef(null),x=(0,s.useComposedRefs)(r,u),m=a.useRef(null);return(0,t.jsx)(l.WarningProvider,{contentName:f,titleName:v,docsSlug:"alert-dialog",children:(0,t.jsx)(p,{scope:n,cancelRef:m,children:(0,t.jsxs)(l.Content,{role:"alertdialog",...c,...d,ref:x,onOpenAutoFocus:(0,i.composeEventHandlers)(d.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=m.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(j,{children:o}),(0,t.jsx)(T,{contentRef:u})]})})})});b.displayName=f;var v="AlertDialogTitle",w=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=g(r);return(0,t.jsx)(l.Title,{...i,...s,ref:a})});w.displayName=v;var N="AlertDialogDescription",D=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=g(r);return(0,t.jsx)(l.Description,{...i,...s,ref:a})});D.displayName=N;var k=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=g(r);return(0,t.jsx)(l.Close,{...i,...s,ref:a})});k.displayName="AlertDialogAction";var A="AlertDialogCancel",C=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...i}=e,{cancelRef:n}=y(A,r),o=g(r),d=(0,s.useComposedRefs)(a,n);return(0,t.jsx)(l.Close,{...o,...i,ref:d})});C.displayName=A;var T=e=>{let{contentRef:t}=e,r="`".concat(f,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(f,"` by passing a `").concat(N,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(f,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},S=e.i(75157),z=e.i(19455);function R(e){let{...a}=e;return(0,t.jsx)(u,{"data-slot":"alert-dialog",...a})}function P(e){let{...a}=e;return(0,t.jsx)(x,{"data-slot":"alert-dialog-trigger",...a})}function O(e){let{...a}=e;return(0,t.jsx)(m,{"data-slot":"alert-dialog-portal",...a})}function B(e){let{className:a,...r}=e;return(0,t.jsx)(h,{"data-slot":"alert-dialog-overlay",className:(0,S.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/95 backdrop-blur-lg",a),...r})}function E(e){let{className:a,...r}=e;return(0,t.jsxs)(O,{children:[(0,t.jsx)(B,{}),(0,t.jsx)(b,{"data-slot":"alert-dialog-content",className:(0,S.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...r})]})}function F(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,S.cn)("flex flex-col gap-2 text-center sm:text-left",a),...r})}function M(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,S.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...r})}function H(e){let{className:a,...r}=e;return(0,t.jsx)(w,{"data-slot":"alert-dialog-title",className:(0,S.cn)("text-lg font-semibold",a),...r})}function I(e){let{className:a,...r}=e;return(0,t.jsx)(D,{"data-slot":"alert-dialog-description",className:(0,S.cn)("text-muted-foreground text-sm",a),...r})}function V(e){let{className:a,...r}=e;return(0,t.jsx)(k,{className:(0,S.cn)((0,z.buttonVariants)(),a),...r})}function L(e){let{className:a,...r}=e;return(0,t.jsx)(C,{className:(0,S.cn)((0,z.buttonVariants)({variant:"outline"}),a),...r})}},24687,e=>{"use strict";e.s(["Textarea",()=>r]);var t=e.i(43476),a=e.i(75157);function r(e){let{className:r,...s}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...s})}},79117,e=>{"use strict";e.s(["default",()=>z],79117);var t=e.i(43476),a=e.i(71645),r=e.i(7233),s=e.i(88511),l=e.i(27612);let i=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var n=e.i(37727),o=e.i(19455),d=e.i(15288),c=e.i(93479),g=e.i(10204),u=e.i(24687),x=e.i(87486),m=e.i(26999),h=e.i(95926),f=e.i(75157);function p(e){let{...a}=e;return(0,t.jsx)(m.Root,{"data-slot":"dialog",...a})}function y(e){let{...a}=e;return(0,t.jsx)(m.Trigger,{"data-slot":"dialog-trigger",...a})}function j(e){let{...a}=e;return(0,t.jsx)(m.Portal,{"data-slot":"dialog-portal",...a})}function b(e){let{className:a,...r}=e;return(0,t.jsx)(m.Overlay,{"data-slot":"dialog-overlay",className:(0,f.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80 backdrop-blur-sm",a),...r})}function v(e){let{className:a,children:r,showCloseButton:s=!0,...l}=e;return(0,t.jsxs)(j,{"data-slot":"dialog-portal",children:[(0,t.jsx)(b,{}),(0,t.jsxs)(m.Content,{"data-slot":"dialog-content",className:(0,f.cn)("bg-white dark:bg-gray-900 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border-2 border-gray-200 dark:border-gray-700 p-6 shadow-2xl duration-200 sm:max-w-lg",a),...l,children:[r,s&&(0,t.jsxs)(m.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(h.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function w(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,f.cn)("flex flex-col gap-2 text-center sm:text-left",a),...r})}function N(e){let{className:a,...r}=e;return(0,t.jsx)(m.Title,{"data-slot":"dialog-title",className:(0,f.cn)("text-lg leading-none font-semibold",a),...r})}var D=e.i(68499);function k(m){let{onSignaturesChange:h}=m,[f,j]=(0,a.useState)([]),[b,k]=(0,a.useState)(!1),[A,C]=(0,a.useState)(null),[T,S]=(0,a.useState)({name:"",content:"",isDefault:!1});(0,a.useEffect)(()=>{z()},[]);let z=async()=>{try{let t=await fetch("/api/signatures");if(t.ok){let e=await t.json();j(e)}else{let{signatures:t}=await e.A(38425);j(t)}}catch(t){console.error("署名データの読み込みに失敗しました:",t);try{let{signatures:t}=await e.A(38425);j(t)}catch(e){console.error("ローカルデータの読み込みにも失敗しました:",e)}}},R=async()=>{if(!T.name.trim()||!T.content.trim())return void alert("署名名と内容は必須です。");try{if(A){let e={id:A.id,name:T.name,content:T.content,isDefault:T.isDefault},t=await fetch("/api/signatures/".concat(A.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();j(t=>t.map(t=>t.id===A.id?e:t))}}else{let e={name:T.name,content:T.content,isDefault:T.isDefault},t=await fetch("/api/signatures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();j(t=>[...t,e])}}T.isDefault&&j(e=>e.map(e=>({...e,isDefault:e.id===((null==A?void 0:A.id)||"new")}))),O(),k(!1),null==h||h(f)}catch(e){console.error("署名の保存に失敗しました:",e),alert("署名の保存に失敗しました。")}},P=async e=>{try{(await fetch("/api/signatures/".concat(e),{method:"DELETE"})).ok&&(j(t=>t.filter(t=>t.id!==e)),null==h||h(f.filter(t=>t.id!==e)))}catch(e){console.error("署名の削除に失敗しました:",e),alert("署名の削除に失敗しました。")}},O=()=>{S({name:"",content:"",isDefault:!1}),C(null)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"署名管理"}),(0,t.jsxs)(p,{open:b,onOpenChange:k,children:[(0,t.jsx)(y,{asChild:!0,children:(0,t.jsxs)(o.Button,{onClick:()=>{O(),k(!0)},className:"bg-black hover:bg-gray-800 text-white shadow-sm",children:[(0,t.jsx)(r.Plus,{className:"h-4 w-4 mr-2"}),"新規署名"]})}),(0,t.jsxs)(v,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-600 shadow-2xl",children:[(0,t.jsx)(w,{children:(0,t.jsx)(N,{className:"text-xl font-semibold text-gray-900",children:A?"署名を編集":"新規署名を作成"})}),(0,t.jsxs)("div",{className:"space-y-6 py-4 bg-white dark:bg-gray-900",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.Label,{htmlFor:"name",className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"署名名"}),(0,t.jsx)(c.Input,{id:"name",value:T.name,onChange:e=>S(t=>({...t,name:e.target.value})),placeholder:"署名の名前を入力してください",className:"w-full bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.Label,{htmlFor:"content",className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"署名内容"}),(0,t.jsx)(u.Textarea,{id:"content",value:T.content,onChange:e=>S(t=>({...t,content:e.target.value})),placeholder:"署名の内容を入力してください",rows:10,className:"w-full min-h-[200px] resize-y bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100"}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"改行はそのまま反映されます。適切な署名文を作成してください。"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isDefault",checked:T.isDefault,onChange:e=>S(t=>({...t,isDefault:e.target.checked})),className:"rounded h-4 w-4 text-blue-600 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600"}),(0,t.jsx)(g.Label,{htmlFor:"isDefault",className:"text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-100",children:"デフォルト署名として設定"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)(o.Button,{variant:"outline",onClick:()=>{O(),k(!1)},className:"w-full sm:w-auto bg-white border-gray-200 text-gray-900 hover:bg-gray-50 hover:text-gray-900",children:[(0,t.jsx)(n.X,{className:"h-4 w-4 mr-2"}),"キャンセル"]}),(0,t.jsxs)(o.Button,{onClick:R,className:"w-full sm:w-auto bg-black hover:bg-gray-800 text-white shadow-sm",children:[(0,t.jsx)(i,{className:"h-4 w-4 mr-2"}),"保存"]})]})]})]})]})]}),(0,t.jsx)("div",{className:"grid gap-4",children:f.map(e=>(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-lg text-gray-900",children:e.name}),e.isDefault&&(0,t.jsx)(x.Badge,{variant:"default",className:"bg-gray-100 text-gray-800",children:"デフォルト"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{C(e),S({name:e.name,content:e.content,isDefault:e.isDefault}),k(!0)},className:"bg-white border-gray-200 text-gray-900 hover:bg-gray-50 hover:text-gray-900",children:(0,t.jsx)(s.Edit,{className:"h-4 w-4"})}),(0,t.jsxs)(D.AlertDialog,{children:[(0,t.jsx)(D.AlertDialogTrigger,{asChild:!0,children:(0,t.jsx)(o.Button,{variant:"outline",size:"sm",className:"bg-white border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700 hover:border-red-300 transition-colors",children:(0,t.jsx)(l.Trash2,{className:"h-4 w-4"})})}),(0,t.jsxs)(D.AlertDialogContent,{className:"bg-white border border-gray-200 shadow-lg",children:[(0,t.jsxs)(D.AlertDialogHeader,{children:[(0,t.jsx)(D.AlertDialogTitle,{children:"署名を削除しますか？"}),(0,t.jsxs)(D.AlertDialogDescription,{children:["この操作は取り消すことができません。署名「",e.name,"」が完全に削除されます。"]})]}),(0,t.jsxs)(D.AlertDialogFooter,{children:[(0,t.jsx)(D.AlertDialogCancel,{className:"hover:bg-gray-100 transition-colors",children:"キャンセル"}),(0,t.jsx)(D.AlertDialogAction,{onClick:()=>P(e.id),className:"bg-red-600 hover:bg-red-700 text-white",children:"削除"})]})]})]})]})]})}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"whitespace-pre-wrap text-sm text-gray-600",children:e.content}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["作成日: ",new Date(e.createdAt).toLocaleDateString("ja-JP")]})]})]},e.id))}),0===f.length&&(0,t.jsx)(d.Card,{children:(0,t.jsxs)(d.CardContent,{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"署名が登録されていません。"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"新規署名ボタンから署名を作成してください。"})]})})]})}var A=e.i(2971),C=e.i(22468),T=e.i(30909),S=e.i(14544);function z(){return(0,t.jsxs)(T.SidebarProvider,{children:[(0,t.jsx)(C.AppSidebar,{}),(0,t.jsxs)(T.SidebarInset,{children:[(0,t.jsx)(A.default,{currentPage:"signatures"}),(0,t.jsx)("main",{className:"flex-1 p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,t.jsx)(S.default,{children:(0,t.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 leading-tight",children:"署名管理"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2 text-xs sm:text-sm",children:"メール署名の作成・編集・管理を行います"})]})})}),(0,t.jsx)(S.default,{delay:.2,children:(0,t.jsx)(k,{})})]})})]})]})}},38425,e=>{e.v(t=>Promise.all(["static/chunks/1b6e5595b2d0c208.js"].map(t=>e.l(t))).then(()=>t(79523)))}]);