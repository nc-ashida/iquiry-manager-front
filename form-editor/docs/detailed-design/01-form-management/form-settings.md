# уГХуВйуГ╝уГашинхоЪцйЯшГ╜

уГХуВйуГ╝уГауБошй│ч┤░шинхоЪя╝ИшЗкхЛХш┐Фф┐буАБуГХуВбуВдуГлуВвуГГуГЧуГнуГ╝уГЙуАБши▒хПпуГЙуГбуВдуГ│чнЙя╝ЙуВТчобчРЖуБЩуВЛцйЯшГ╜уБзуБЩуАВ

## ЁЯУЛ цйЯшГ╜цжВшжБ

уГХуВйуГ╝уГауБощАБф┐бшинхоЪуАБшЗкхЛХш┐Фф┐бшинхоЪуАБуГХуВбуВдуГлуВвуГГуГЧуГнуГ╝уГЙшинхоЪуАБши▒хПпуГЙуГбуВдуГ│шинхоЪчнЙуБошй│ч┤░шинхоЪуВТшбМуБДуБ╛уБЩуАВ

## ЁЯФз хоЯшгЕшй│ч┤░

### уГХуВбуВдуГлф╜Нч╜о
- **уГбуВдуГ│уГХуВбуВдуГл**: `src/components/SettingsEditor.tsx`
- **ч╡▒хРИха┤цЙА**: `src/components/FormEditor.tsx` (шинхоЪщГихИЖ)

### уВ│уГ│уГЭуГ╝уГНуГ│уГИцзЛцИР
```typescript
interface SettingsEditorProps {
  settings: FormSettings;
  signatures: Signature[];
  onSettingsChange: (settings: FormSettings) => void;
}
```

## ЁЯОп ф╕╗шжБцйЯшГ╜

### 1. шЗкхЛХш┐Фф┐бшинхоЪ
```typescript
{/* шЗкхЛХш┐Фф┐бшинхоЪ */}
<div className="flex flex-row items-center justify-between rounded-xl border border-gray-200 p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200">
  <div className="space-y-2 flex-1 pr-4">
    <Label
      htmlFor="autoReply"
      className="text-base font-semibold cursor-pointer text-gray-900"
    >
      шЗкхЛХш┐Фф┐б
    </Label>
    <p className="text-sm text-gray-600 leading-relaxed">
      уГХуВйуГ╝уГащАБф┐бцЩВуБлшЗкхЛХш┐Фф┐буГбуГ╝уГлуВТщАБф┐буБЧуБ╛уБЩ
    </p>
  </div>
  <div className="flex-shrink-0">
    <Switch
      id="autoReply"
      checked={currentForm.settings.autoReply}
      onCheckedChange={(checked: boolean) =>
        handleFormChange({
          settings: { ...currentForm.settings, autoReply: checked }
        })
      }
    />
  </div>
</div>
```

### 2. уГХуВбуВдуГлуВвуГГуГЧуГнуГ╝уГЙшинхоЪ
```typescript
{/* ц╖╗ф╗ШуГХуВбуВдуГлшинхоЪ */}
<div className="space-y-4">
  <div className="flex flex-row items-center justify-between rounded-xl border border-gray-200 p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200">
    <div className="space-y-2 flex-1 pr-4">
      <Label
        htmlFor="fileUpload"
        className="text-base font-semibold cursor-pointer text-gray-900"
      >
        ц╖╗ф╗ШуГХуВбуВдуГл
      </Label>
      <p className="text-sm text-gray-600 leading-relaxed">
        уБУуБоуГХуВйуГ╝уГауБзц╖╗ф╗ШуГХуВбуВдуГлуБощАБф┐буВТши▒хПпуБЧуБ╛уБЩ
      </p>
    </div>
    <div className="flex-shrink-0">
      <Switch
        id="fileUpload"
        checked={currentForm.settings.fileUpload?.enabled || false}
        onCheckedChange={(checked: boolean) => {
          const currentFileUpload = currentForm.settings.fileUpload || {
            enabled: false,
            maxFiles: 1,
            maxFileSize: 10
          };
          handleFormChange({
            settings: {
              ...currentForm.settings,
              fileUpload: {
                ...currentFileUpload,
                enabled: checked
              }
            }
          });
        }}
      />
    </div>
  </div>

  {/* ц╖╗ф╗ШуГХуВбуВдуГлуБошй│ч┤░шинхоЪ */}
  {currentForm.settings.fileUpload?.enabled && (
    <div className="space-y-6 pl-8 border-l-2 border-black bg-gray-50/50 p-6 rounded-r-xl">
      <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div className="space-y-3">
          <Label htmlFor="maxFiles" className="text-sm font-semibold text-gray-900">
            цЬАхдзуГХуВбуВдуГлцХ░
          </Label>
          <Input
            id="maxFiles"
            type="number"
            min="1"
            max="5"
            value={currentForm.settings.fileUpload?.maxFiles || 1}
            onChange={(e) => {
              const value = Math.min(5, Math.max(1, parseInt(e.target.value) || 1));
              handleFormChange({
                settings: {
                  ...currentForm.settings,
                  fileUpload: {
                    ...currentForm.settings.fileUpload!,
                    maxFiles: value
                  }
                }
              });
            }}
            className="h-10"
          />
          <p className="text-sm text-gray-600">1уАЬ5уГХуВбуВдуГлуБ╛уБз</p>
        </div>
        <div className="space-y-3">
          <Label htmlFor="maxFileSize" className="text-sm font-semibold text-gray-900">
            1уГХуВбуВдуГлуБВуБЯуВКуБоцЬАхдзхо╣щЗП (MB)
          </Label>
          <Input
            id="maxFileSize"
            type="number"
            min="1"
            max="20"
            value={currentForm.settings.fileUpload?.maxFileSize || 10}
            onChange={(e) => {
              const value = Math.min(20, Math.max(1, parseInt(e.target.value) || 1));
              handleFormChange({
                settings: {
                  ...currentForm.settings,
                  fileUpload: {
                    ...currentForm.settings.fileUpload!,
                    maxFileSize: value
                  }
                }
              });
            }}
            className="h-10"
          />
          <p className="text-sm text-gray-600">1уАЬ20MBуБ╛уБз</p>
        </div>
      </div>
      <div className="text-sm text-gray-600 bg-gray-100 p-4 rounded-lg border border-gray-200">
        ЁЯТб ц╖╗ф╗ШуГХуВбуВдуГлуБпшЗкхЛХчЪДуБлуГХуВйуГ╝уГауБоцЬАх╛МуБлшбичд║уБХуВМуБ╛уБЩ
      </div>
    </div>
  )}
</div>
```

### 3. ши▒хПпуГЙуГбуВдуГ│шинхоЪ
```typescript
{/* ши▒хПпуГЙуГбуВдуГ│шинхоЪ */}
<div className="space-y-4">
  <div className="flex flex-row items-center justify-between rounded-xl border border-gray-200 p-6 shadow-sm bg-white hover:shadow-md transition-all duration-200">
    <div className="space-y-2 flex-1 pr-4">
      <Label
        htmlFor="allowedDomains"
        className="text-base font-semibold cursor-pointer text-gray-900"
      >
        ши▒хПпуГЙуГбуВдуГ│шинхоЪ
      </Label>
      <p className="text-sm text-gray-600 leading-relaxed">
        хХПхРИуБЫхПЧф╗ШуВТши▒хПпуБЩуВЛуГЙуГбуВдуГ│уВТцМЗхоЪуБЧуБ╛уБЩя╝ИCORSшинхоЪчФия╝Й
      </p>
    </div>
  </div>

  {/* уГЙуГбуВдуГ│ф╕Ашжз */}
  <div className="space-y-4 pl-8 border-l-2 border-blue-200 bg-blue-50/30 p-6 rounded-r-xl">
    <div className="space-y-3">
      <Label className="text-sm font-semibold text-gray-900">
        ши▒хПпуГЙуГбуВдуГ│ф╕Ашжз
      </Label>
      <p className="text-xs text-gray-600">
        ф╛Л: example.com, subdomain.example.com, localhost:3000
      </p>

      {/* уГЙуГбуВдуГ│хЕехКЫуВиуГкуВв */}
      <div className="space-y-2">
        {currentForm.settings.allowedDomains?.map((domain, index) => (
          <div key={index} className="flex items-center space-x-2">
            <Input
              type="text"
              value={domain}
              onChange={(e) => {
                const newDomains = [...(currentForm.settings.allowedDomains || [])];
                newDomains[index] = e.target.value;
                handleFormChange({
                  settings: {
                    ...currentForm.settings,
                    allowedDomains: newDomains
                  }
                });
              }}
              placeholder="example.com"
              className={`flex-1 ${!domain.trim() ? 'border-red-300 focus:border-red-500' : ''}`}
            />
            <Button
              type="button"
              variant="outline"
              size="sm"
              onClick={() => {
                const currentDomains = currentForm.settings.allowedDomains || [];
                // цЬАф╜О1уБдуБпцоЛуБЩх┐ЕшжБуБМуБВуВЛ
                if (currentDomains.length <= 1) {
                  return; // хЙКщЩдуВТчДбхК╣хМЦ
                }
                const newDomains = [...currentDomains];
                newDomains.splice(index, 1);
                handleFormChange({
                  settings: {
                    ...currentForm.settings,
                    allowedDomains: newDomains
                  }
                });
              }}
              disabled={(currentForm.settings.allowedDomains || []).length <= 1}
              className={`text-red-600 hover:text-red-700 hover:bg-red-50 ${(currentForm.settings.allowedDomains || []).length <= 1
                ? 'opacity-50 cursor-not-allowed'
                : ''
                }`}
            >
              хЙКщЩд
            </Button>
          </div>
        )) || []}

        {/* уГЙуГбуВдуГ│ш┐╜хКауГЬуВ┐уГ│ */}
        <Button
          type="button"
          variant="outline"
          size="sm"
          onClick={() => {
            const currentDomains = currentForm.settings.allowedDomains || [];
            // чй║уБоуГЙуГбуВдуГ│уБМуБВуВЛха┤хРИуБпш┐╜хКауБЧуБкуБД
            if (currentDomains.some(domain => !domain.trim())) {
              return;
            }
            const newDomains = [...currentDomains, ''];
            handleFormChange({
              settings: {
                ...currentForm.settings,
                allowedDomains: newDomains
              }
            });
          }}
          disabled={(currentForm.settings.allowedDomains || []).some(domain => !domain.trim())}
          className={`w-full border-dashed border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 ${(currentForm.settings.allowedDomains || []).some(domain => !domain.trim())
            ? 'opacity-50 cursor-not-allowed'
            : ''
            }`}
        >
          + уГЙуГбуВдуГ│уВТш┐╜хКа
        </Button>
      </div>

      {/* уГРуГкуГЗуГ╝уВ╖уГзуГ│уВиуГйуГ╝шбичд║ */}
      {(!currentForm.settings.allowedDomains ||
        currentForm.settings.allowedDomains.length === 0 ||
        currentForm.settings.allowedDomains.some(domain => !domain.trim())) && (
          <div className="mt-3 p-3 bg-red-50 border border-red-200 rounded-lg">
            <div className="flex items-start space-x-2">
              <div className="text-red-600 text-sm">тЭМ</div>
              <div className="text-xs text-red-800">
                <p className="font-medium mb-1">х┐ЕщаИшинхоЪуВиуГйуГ╝:</p>
                <ul className="space-y-1 text-xs">
                  <li>тАв цЬАф╜О1уБдф╗еф╕КуБоуГЙуГбуВдуГ│уВТчЩ╗щМ▓уБЧуБжуБПуБауБХуБД</li>
                  <li>тАв чй║уБоуГЙуГбуВдуГ│уБпчЩ╗щМ▓уБзуБНуБ╛уБЫуВУ</li>
                </ul>
              </div>
            </div>
          </div>
        )}

      {/* ц│ицДПф║ЛщаЕ */}
      <div className="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
        <div className="flex items-start space-x-2">
          <div className="text-yellow-600 text-sm">тЪая╕П</div>
          <div className="text-xs text-yellow-800">
            <p className="font-medium mb-1">шинхоЪцЩВуБоц│ицДПф║ЛщаЕ:</p>
            <ul className="space-y-1 text-xs">
              <li>тАв <strong>цЬАф╜О1уБдф╗еф╕КуБоуГЙуГбуВдуГ│чЩ╗щМ▓уБМх┐ЕщаИуБзуБЩ</strong></li>
              <li>тАв уГЧуГнуГИуВ│уГля╝Иhttp://, https://я╝ЙуБпф╕НшжБуБзуБЩ</li>
              <li>тАв уГЭуГ╝уГИчХкхП╖уВТхРлуВБуВЛха┤хРИуБпуАМ:уАНуБзхМ║хИЗуБгуБжуБПуБауБХуБД</li>
              <li>тАв уГпуВдуГлуГЙуВлуГ╝уГЙя╝И*я╝ЙуБпф╜┐чФиуБзуБНуБ╛уБЫуВУ</li>
              <li>тАв щЦЛчЩ║чТ░хвГуБзуБпуАМlocalhost:3000уАНуБкуБйуВТш┐╜хКауБЧуБжуБПуБауБХуБД</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
```

### 4. щАБф┐бшинхоЪя╝ИSettingsEditorя╝Й
```typescript
{/* щАБф┐бшинхоЪ */}
<div className="space-y-3">
  <Label className="text-sm font-medium">щАБф┐бшинхоЪ</Label>
  <SettingsEditor
    settings={currentForm.settings}
    signatures={signatures}
    onSettingsChange={(settings) => handleFormChange({ settings })}
  />
</div>
```

## ЁЯФз SettingsEditor уВ│уГ│уГЭуГ╝уГНуГ│уГИшй│ч┤░

### хоМф║ЖуГЪуГ╝уВ╕URLшинхоЪ
```typescript
{/* хоМф║ЖуГЪуГ╝уВ╕URL */}
<div>
  <label className="block text-base font-medium text-gray-700 mb-2">
    хоМф║ЖуГЪуГ╝уВ╕URL
  </label>
  <input
    type="url"
    value={settings.completionUrl}
    onChange={(e) => handleCompletionUrlChange(e.target.value)}
    className="w-full px-3 py-2 border border-gray-300 rounded-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    placeholder="https://example.com/thank-you"
  />
  <p className="mt-1 text-base text-gray-500">
    уГХуВйуГ╝уГащАБф┐бхоМф║Жх╛МуБлуГкуГАуВдуГмуВпуГИуБЩуВЛURLуВТцМЗхоЪуБЧуБжуБПуБауБХуБДуАВчй║уБоха┤хРИуБпуВвуГйуГ╝уГИуБзхоМф║ЖуВТщАЪчЯеуБЧуБ╛уБЩуАВ
  </p>
</div>
```

### ч╜▓хРНщБ╕цКЮ
```typescript
{/* ч╜▓хРНщБ╕цКЮ */}
<div>
  <label className="block text-base font-medium text-gray-700 mb-2">
    щАБф┐бцОзуБИуГбуГ╝уГлуБоч╜▓хРН
  </label>
  <Select
    value={settings.signatureId || undefined}
    onValueChange={(value) => handleSignatureChange(value || "")}
  >
    <SelectTrigger className="w-full">
      <SelectValue placeholder="ч╜▓хРНуВТщБ╕цКЮуБЧуБжуБПуБауБХуБД" />
    </SelectTrigger>
    <SelectContent>
      {signatures.map((signature) => (
        <SelectItem key={signature.id} value={signature.id}>
          {signature.name}
        </SelectItem>
      ))}
    </SelectContent>
  </Select>
  <p className="mt-1 text-base text-gray-500">
    щАБф┐бцОзуБИуГбуГ╝уГлуБлф╜┐чФиуБЩуВЛч╜▓хРНуВТщБ╕цКЮуБЧуБжуБПуБауБХуБДуАВ
  </p>
</div>
```

### ч╜▓хРНуГЧуГмуГУуГеуГ╝
```typescript
{/* щБ╕цКЮуБХуВМуБЯч╜▓хРНуБоуГЧуГмуГУуГеуГ╝ */}
{settings.signatureId && (
  <div className="bg-gray-50 border border-gray-200 rounded-none p-4">
    <h4 className="font-medium text-gray-900 mb-2">ч╜▓хРНуГЧуГмуГУуГеуГ╝</h4>
    <div className="text-base text-gray-700 whitespace-pre-line">
      {signatures.find(s => s.id === settings.signatureId)?.content}
    </div>
  </div>
)}
```

## ЁЯОи уГмуВ╣уГЭуГ│уВ╖уГЦхп╛х┐Ь

### 1. уВ░уГкуГГуГЙуГмуВдуВвуВжуГИ
```typescript
<div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
  <div className="space-y-3">
    <Label htmlFor="maxFiles" className="text-sm font-semibold text-gray-900">
      цЬАхдзуГХуВбуВдуГлцХ░
    </Label>
    <Input
      id="maxFiles"
      type="number"
      min="1"
      max="5"
      value={currentForm.settings.fileUpload?.maxFiles || 1}
      onChange={(e) => {
        const value = Math.min(5, Math.max(1, parseInt(e.target.value) || 1));
        handleFormChange({
          settings: {
            ...currentForm.settings,
            fileUpload: {
              ...currentForm.settings.fileUpload!,
              maxFiles: value
            }
          }
        });
      }}
      className="h-10"
    />
    <p className="text-sm text-gray-600">1уАЬ5уГХуВбуВдуГлуБ╛уБз</p>
  </div>
  {/* 2хИЧчЫоуБошинхоЪ */}
</div>
```

### 2. уГЙуГбуВдуГ│хЕехКЫуВиуГкуВв
```typescript
<div className="flex items-center space-x-2">
  <Input
    type="text"
    value={domain}
    onChange={(e) => {
      const newDomains = [...(currentForm.settings.allowedDomains || [])];
      newDomains[index] = e.target.value;
      handleFormChange({
        settings: {
          ...currentForm.settings,
          allowedDomains: newDomains
        }
      });
    }}
    placeholder="example.com"
    className={`flex-1 ${!domain.trim() ? 'border-red-300 focus:border-red-500' : ''}`}
  />
  <Button
    type="button"
    variant="outline"
    size="sm"
    onClick={() => {
      // хЙКщЩдхЗжчРЖ
    }}
    disabled={(currentForm.settings.allowedDomains || []).length <= 1}
    className={`text-red-600 hover:text-red-700 hover:bg-red-50 ${(currentForm.settings.allowedDomains || []).length <= 1
      ? 'opacity-50 cursor-not-allowed'
      : ''
      }`}
  >
    хЙКщЩд
  </Button>
</div>
```

## ЁЯФД чК╢цЕЛчобчРЖ

### шинхоЪчК╢цЕЛ
```typescript
const [currentForm, setCurrentForm] = useState<Form | null>(form);
const [signatures, setSignatures] = useState<Signature[]>([]);
```

### шинхоЪцЫ┤цЦ░щЦвцХ░
```typescript
const handleFormChange = (updates: Partial<Form>) => {
  setCurrentForm({ ...currentForm, ...updates });
};

const handleCompletionUrlChange = (completionUrl: string) => {
  onSettingsChange({ ...settings, completionUrl });
};

const handleSignatureChange = (signatureId: string) => {
  onSettingsChange({ ...settings, signatureId });
};

const handleAutoReplyChange = (autoReply: boolean) => {
  onSettingsChange({ ...settings, autoReply });
};
```

## тЪая╕П уГкуГХуВбуВпуВ┐уГкуГ│уВ░цЩВуБоц│ицДПчВ╣

1. **шинхоЪщаЕчЫо**: чП╛хЬиуБошинхоЪщаЕчЫоуВТч╢нцМБ
2. **уГРуГкуГЗуГ╝уВ╖уГзуГ│**: чП╛хЬиуБоуГРуГкуГЗуГ╝уВ╖уГзуГ│цйЯшГ╜уВТч╢нцМБ
3. **уГмуВ╣уГЭуГ│уВ╖уГЦхп╛х┐Ь**: чП╛хЬиуБоуГмуВ╣уГЭуГ│уВ╖уГЦхп╛х┐ЬуВТч╢нцМБ
4. **ч╜▓хРНч╡▒хРИ**: ч╜▓хРНщБ╕цКЮцйЯшГ╜уВТч╢нцМБ
5. **уГЙуГбуВдуГ│шинхоЪ**: ши▒хПпуГЙуГбуВдуГ│шинхоЪуБоцйЯшГ╜уВТч╢нцМБ

## ЁЯУБ щЦвщАгуГХуВбуВдуГл

- `src/components/SettingsEditor.tsx` - щАБф┐бшинхоЪуВиуГЗуВгуВ┐уГ╝
- `src/components/FormEditor.tsx` - уГХуВйуГ╝уГашинхоЪч╡▒хРИ
- `src/shared/types/index.ts` - хЮЛхоЪч╛й
- `src/data/signatures.ts` - ч╜▓хРНуГЗуГ╝уВ┐

## ЁЯФЧ щЦвщАгцйЯшГ╜

- **уГХуВйуГ╝уГачобчРЖ**: уГХуВйуГ╝уГашинхоЪуБоч╡▒хРИ
- **ч╜▓хРНчобчРЖ**: ч╜▓хРНщБ╕цКЮцйЯшГ╜
- **уГРуГкуГЗуГ╝уВ╖уГзуГ│**: шинхоЪхАдуБоцдЬши╝
- **уГЗуГ╝уВ┐чобчРЖ**: шинхоЪуГЗуГ╝уВ┐уБоц░╕ч╢ЪхМЦ

## ЁЯУЭ уГЖуВ╣уГИуВ▒уГ╝уВ╣

### цнгх╕╕ч│╗
1. шЗкхЛХш┐Фф┐бшинхоЪуБохИЗуВКцЫ┐уБИ
2. уГХуВбуВдуГлуВвуГГуГЧуГнуГ╝уГЙшинхоЪ
3. ши▒хПпуГЙуГбуВдуГ│шинхоЪ
4. ч╜▓хРНщБ╕цКЮ
5. хоМф║ЖуГЪуГ╝уВ╕URLшинхоЪ

### чХ░х╕╕ч│╗
1. чДбхК╣уБкURLуБохЕехКЫ
2. уГЙуГбуВдуГ│шинхоЪуБоуГРуГкуГЗуГ╝уВ╖уГзуГ│
3. уГХуВбуВдуГлуВ╡уВдуВ║хИ╢щЩРуБош╢ЕщБО
4. х┐ЕщаИшинхоЪуБоцЬкхЕехКЫ

## ЁЯЪА цФ╣хЦДцПРцбИ

1. **шинхоЪуГЖуГ│уГЧуГмуГ╝уГИ**: уВИуБПф╜┐уВПуВМуВЛшинхоЪуБоуГЖуГ│уГЧуГмуГ╝уГИ
2. **шинхоЪуБоуВдуГ│уГЭуГ╝уГИ/уВиуВпуВ╣уГЭуГ╝уГИ**: шинхоЪуГЗуГ╝уВ┐уБочз╗шбМ
3. **шинхоЪуБоуГРуГ╝уВ╕уГзуГ│чобчРЖ**: шинхоЪуБох▒ецн┤чобчРЖ
4. **шинхоЪуБоцдЬши╝**: уВИуВКшй│ч┤░уБкшинхоЪхАдуБоцдЬши╝
5. **шинхоЪуБоуГЧуГмуГУуГеуГ╝**: шинхоЪхдЙцЫ┤уБоуГЧуГмуГУуГеуГ╝цйЯшГ╜
6. **шинхоЪуБоф╕АцЛмцУНф╜Ь**: шдЗцХ░уГХуВйуГ╝уГауБошинхоЪф╕АцЛмхдЙцЫ┤
