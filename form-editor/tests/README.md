# E2Eレイアウトテスト

このディレクトリには、フォームエディターアプリケーションのレイアウトが正しく適用されるかを確認するE2Eテストが含まれています。

## テストファイル一覧

### 1. `layout-main-page.spec.ts`
メインページ（フォーム管理）のレイアウトテスト
- ページタイトルの表示
- サイドバーの表示
- メインコンテンツエリアの表示
- レスポンシブデザイン
- フォーム作成ボタンの動作
- アニメーションの動作
- テーマの適用

### 2. `layout-inbox-page.spec.ts`
受信メールページのレイアウトテスト
- ヘッダーセクションの表示
- 検索・フィルター機能の表示
- タブ機能の表示
- メールリストの表示
- 優先度・カテゴリバッジの表示
- 未読メールのスタイル
- ドロップダウンメニューの動作
- レスポンシブデザイン

### 3. `layout-signatures-page.spec.ts`
署名管理ページのレイアウトテスト
- ヘッダーセクションの表示
- 署名エディターの表示
- 署名一覧の表示
- 署名アイテムの詳細表示
- アクションボタンの表示
- 検索・フィルター機能
- 並び替え機能
- 一括操作機能
- 統計情報の表示

### 4. `layout-sidebar-navigation.spec.ts`
サイドバーナビゲーションのレイアウトテスト
- サイドバーの表示
- ヘッダーセクションの表示
- メニューグループの表示
- メニューアイテムの表示
- アクティブ状態の表示
- ホバー効果の動作
- ページ遷移の動作
- フッターの表示
- 折りたたみ機能
- ツールチップの表示
- アクセシビリティ

### 5. `layout-responsive-design.spec.ts`
レスポンシブデザインのレイアウトテスト
- デスクトップ（1200px以上）での表示
- タブレット（768px-1199px）での表示
- モバイル（375px-767px）での表示
- 極小画面（320px）での表示
- 超大画面（1920px以上）での表示
- 各ページのレスポンシブ動作
- コンポーネントのレスポンシブ動作

### 6. `layout-form-editor.spec.ts`
フォームエディターのレイアウトテスト
- フォームエディターの表示
- 基本情報セクションの表示
- フィールド管理セクションの表示
- フィールドタイプ選択の動作
- フィールド追加機能の動作
- フィールド設定パネルの表示
- 並び替え機能の表示
- プレビューセクションの表示
- 設定セクションの表示
- アクションボタンの表示
- 保存・キャンセル機能の動作
- プレビュー機能の動作
- フィールド削除機能の動作
- バリデーション機能の動作

## テストの実行方法

### 全テストの実行
```bash
npm run test
```

### UIモードでの実行
```bash
npm run test:ui
```

### ヘッドレスモードでの実行
```bash
npm run test:headed
```

### 特定のテストファイルの実行
```bash
npx playwright test layout-main-page.spec.ts
```

### 特定のブラウザでの実行
```bash
npx playwright test --project=chromium
npx playwright test --project=firefox
npx playwright test --project=webkit
```

## テストの設定

テストの設定は `playwright.config.ts` で管理されています：

- **ベースURL**: `http://localhost:3300`
- **テストディレクトリ**: `./tests`
- **レポーター**: HTML
- **ブラウザ**: Chromium, Firefox, WebKit
- **自動サーバー起動**: 開発サーバーを自動で起動

## テストデータ

テストでは以下のサンプルデータを使用しています：

- **フォームデータ**: 空のフォームリストから開始
- **メールデータ**: HP問合せシステムとエミダスシステムのサンプルメール
- **署名データ**: デフォルト署名、営業部署名、カスタム署名

## 注意事項

1. **テスト実行前**: 開発サーバーが起動していることを確認してください
2. **データの初期化**: テスト実行前にローカルストレージがクリアされる場合があります
3. **レスポンシブテスト**: 異なる画面サイズでのテストを実行するため、時間がかかる場合があります
4. **アニメーション**: アニメーションの完了を待つため、適切な待機時間が設定されています

## トラブルシューティング

### テストが失敗する場合
1. 開発サーバーが起動しているか確認
2. ポート3300が使用可能か確認
3. ブラウザが正しくインストールされているか確認

### レイアウトが正しく表示されない場合
1. CSSの読み込みを確認
2. コンポーネントのdata-testid属性を確認
3. レスポンシブクラスが正しく適用されているか確認

### アニメーションが正しく動作しない場合
1. Framer Motionの設定を確認
2. アニメーションの完了を待つ時間を調整
3. テストの待機時間を適切に設定
